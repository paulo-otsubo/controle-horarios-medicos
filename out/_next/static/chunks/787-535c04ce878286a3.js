"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[787],{65044:function(e,t,r){r.d(t,{Z:function(){return u}});var a=r(57437),n=r(2265),i=r(29501),o=r(91115),s=r(80845);let l=o.z.object({nome:o.z.string().min(2,"Informe um nome"),descricao:o.z.string().optional()});function u(e){let{initial:t,onSubmit:r,onCancel:o}=e,{register:u,handleSubmit:c,formState:{errors:d},reset:m}=(0,i.cI)({resolver:(0,s.F)(l),defaultValues:t});return(0,n.useEffect)(()=>{m(null!=t?t:{nome:"",descricao:""})},[t,m]),(0,a.jsxs)("form",{onSubmit:c(r),className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nome"}),(0,a.jsx)("input",{type:"text",...u("nome"),className:"mt-1 w-full rounded border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),d.nome&&(0,a.jsx)("p",{className:"text-sm text-error-500",children:d.nome.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Descri\xe7\xe3o"}),(0,a.jsx)("textarea",{rows:3,...u("descricao"),className:"mt-1 w-full rounded border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),d.descricao&&(0,a.jsx)("p",{className:"text-sm text-error-500",children:d.descricao.message})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[o&&(0,a.jsx)("button",{type:"button",onClick:o,className:"rounded bg-gray-200 px-4 py-2 text-gray-700 hover:bg-gray-300",children:"Cancelar"}),(0,a.jsx)("button",{type:"submit",className:"rounded bg-primary-500 px-4 py-2 text-white hover:bg-primary-600",children:"Salvar"})]})]})}},84832:function(e,t,r){r.d(t,{a:function(){return m}});var a=r(2265),n=r(46410),i=r(43301),o=r(64131),s=r(738),l=r(76834);function u(e,t){let r=function(){try{let e=(0,s.C6)().length>0?(0,s.C6)()[0]:(0,s.ZF)({apiKey:"AIzaSyAxDEIXRouCF63f9GK-ShqzTaKQhQIjvyw",authDomain:"controle-horarios-medicos.firebaseapp.com",projectId:"controle-horarios-medicos",storageBucket:"controle-horarios-medicos.firebasestorage.app",messagingSenderId:"977729325505",appId:"1:977729325505:web:82fe901b78d874ef81c740",measurementId:"YOUR_MEASUREMENT_ID"});return l.getAnalytics(e)}catch(e){return console.warn("Analytics init falhou",e),null}}();r&&l.logEvent(r,e,t)}var c=r(5978),d=r(1186);function m(){let[e,t]=(0,a.useState)(null),[r,s]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=(0,i.Aj)(n.I,async e=>{if(t(e),e){var r,a,i;let t=await e.getIdToken();o.Z.set("auth-token",t,{expires:1}),localStorage.setItem("user",JSON.stringify({uid:e.uid,email:e.email}));let s=(0,c.JU)(n.db,"users",e.uid);(await (0,c.QT)(s)).exists()||await (0,c.pl)(s,{email:e.email,nome:null!==(a=e.displayName)&&void 0!==a?a:"",role:"medico",createdAt:Date.now(),updatedAt:Date.now(),isActive:!0});let l=(await (0,c.QT)(s)).data();l&&!l.equipeId&&e.email&&await (0,d.Ol)(e.uid,e.email);let u=null!==(i=null===(r=(await (0,c.QT)(s)).data())||void 0===r?void 0:r.equipeId)&&void 0!==i?i:"";localStorage.setItem("equipeId",u)}else o.Z.remove("auth-token"),localStorage.removeItem("user");s(!1)}),r=(0,i.MX)(n.I,async e=>{if(e){let t=await e.getIdToken();o.Z.set("auth-token",t,{expires:1})}});return()=>{e(),r()}},[]);let l=(0,a.useCallback)(async(e,t)=>{await (0,i.e5)(n.I,e,t),u("login_success")},[]);return{user:e,loading:r,login:l,register:(0,a.useCallback)(async(e,t)=>{let r=await (0,i.Xb)(n.I,e,t);await (0,c.pl)((0,c.JU)(n.db,"users",r.user.uid),{email:e,nome:"",role:"medico",createdAt:Date.now(),updatedAt:Date.now(),isActive:!0}),u("register_success")},[]),logout:(0,a.useCallback)(async()=>{await (0,i.w7)(n.I),u("logout")},[]),resetPassword:(0,a.useCallback)(async e=>{await (0,i.LS)(n.I,e)},[])}}},46410:function(e,t,r){let a;r.d(t,{I:function(){return l},db:function(){return u}});var n,i=r(738),o=r(43301),s=r(5978);a=null!==(n=window._firebaseApp)&&void 0!==n?n:(0,i.ZF)({apiKey:"AIzaSyAxDEIXRouCF63f9GK-ShqzTaKQhQIjvyw",authDomain:"controle-horarios-medicos.firebaseapp.com",projectId:"controle-horarios-medicos",storageBucket:"controle-horarios-medicos.firebasestorage.app",messagingSenderId:"977729325505",appId:"1:977729325505:web:82fe901b78d874ef81c740",measurementId:"YOUR_MEASUREMENT_ID"}),window._firebaseApp=a;let l=(0,o.v0)(a),u=(0,s.ad)(a);try{(0,s.ST)(u)}catch(e){e instanceof i.ZR&&("failed-precondition"===e.code?console.warn("A persist\xeancia do Firestore falhou. Isso geralmente ocorre se voc\xea tiver v\xe1rias abas abertas. Os dados n\xe3o ser\xe3o salvos offline nesta aba."):"unimplemented"===e.code&&console.warn("O navegador atual n\xe3o suporta persist\xeancia offline do Firestore."))}},1186:function(e,t,r){r.d(t,{Cm:function(){return o},Lq:function(){return s},Ol:function(){return l}});var a=r(46410),n=r(66629),i=r(5978);async function o(e,t,r){let n=(0,i.JU)((0,i.hJ)(a.db,"equipes")),o={id:n.id,nome:t,adminId:e,membros:[e],invites:[],timezone:r,createdAt:Date.now(),isActive:!0};return await (0,i.pl)(n,o),await (0,i.r7)((0,i.JU)(a.db,"users",e),{equipeId:n.id,role:"admin_equipe",updatedAt:(0,i.Bt)()}),n.id}async function s(e,t){let r=(0,n.x0)(8);return await (0,i.r7)((0,i.JU)(a.db,"equipes",e),{invites:(0,i.vr)({email:t,code:r,status:"pending"})}),r}async function l(e,t){let r=(0,i.IO)((0,i.hJ)(a.db,"equipes"),(0,i.ar)("invites","array-contains",{code:t,status:"pending"})),n=await (0,i.PL)(r);if(n.empty)return console.error("Nenhum convite encontrado com o c\xf3digo:",t),!1;let o=n.docs[0],s=o.id,l=o.data().invites.map(e=>e.code===t?{...e,status:"accepted"}:e);return await (0,i.r7)(o.ref,{membros:(0,i.vr)(e),invites:l}),await (0,i.r7)((0,i.JU)(a.db,"users",e),{equipeId:s,role:"medico",updatedAt:(0,i.Bt)()}),!0}},47656:function(e,t,r){r.d(t,{R:function(){return i}});var a=r(3011),n=r(89134);let i=(0,a.U)()((0,n.tJ)(e=>({equipes:[],addEquipe:t=>e(e=>({equipes:[...e.equipes,t]})),updateEquipe:(t,r)=>e(e=>({equipes:e.equipes.map(e=>e.id===t?{...e,...r}:e)})),deleteEquipe:t=>e(e=>({equipes:e.equipes.filter(e=>e.id!==t)}))}),{name:"equipe-store"}))},89134:function(e,t,r){r.d(t,{tJ:function(){return n}});let a=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>a(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>a(t)(e)}}},n=(e,t)=>(r,n,i)=>{let o,s={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let a=e=>null===e?null:JSON.parse(e,void 0),n=null!=(t=r.getItem(e))?t:null;return n instanceof Promise?n.then(a):a(n)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},l=!1,u=new Set,c=new Set,d=s.storage;if(!d)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...e)},n,i);let m=()=>{let e=s.partialize({...n()});return d.setItem(s.name,{state:e,version:s.version})},p=i.setState;i.setState=(e,t)=>{p(e,t),m()};let f=e((...e)=>{r(...e),m()},n,i);i.getInitialState=()=>f;let g=()=>{var e,t;if(!d)return;l=!1,u.forEach(e=>{var t;return e(null!=(t=n())?t:f)});let i=(null==(t=s.onRehydrateStorage)?void 0:t.call(s,null!=(e=n())?e:f))||void 0;return a(d.getItem.bind(d))(s.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===s.version)return[!1,e.state];if(s.migrate){let t=s.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[a,i]=e;if(r(o=s.merge(i,null!=(t=n())?t:f),!0),a)return m()}).then(()=>{null==i||i(o,void 0),o=n(),l=!0,c.forEach(e=>e(o))}).catch(e=>{null==i||i(void 0,e)})};return i.persist={setOptions:e=>{s={...s,...e},e.storage&&(d=e.storage)},clearStorage:()=>{null==d||d.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>g(),hasHydrated:()=>l,onHydrate:e=>(u.add(e),()=>{u.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},s.skipHydration||g(),o||f}},3011:function(e,t,r){r.d(t,{U:function(){return l}});var a=r(2265);let n=e=>{let t;let r=new Set,a=(e,a)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=a?a:"object"!=typeof n||null===n)?n:Object.assign({},t,n),r.forEach(r=>r(t,e))}},n=()=>t,i={setState:a,getState:n,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e))},o=t=e(a,n,i);return i},i=e=>e?n(e):n,o=e=>e,s=e=>{let t=i(e),r=e=>(function(e,t=o){let r=a.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return a.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},l=e=>e?s(e):s}}]);