(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[308],{17790:function(e,a,s){Promise.resolve().then(s.bind(s,6151))},99376:function(e,a,s){"use strict";var t=s(35475);s.o(t,"useParams")&&s.d(a,{useParams:function(){return t.useParams}}),s.o(t,"usePathname")&&s.d(a,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(a,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(a,{useSearchParams:function(){return t.useSearchParams}})},6151:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return d}});var t=s(57437),r=s(2265),n=s(29501),o=s(80845),i=s(75426),c=s(84832),l=s(27648),u=s(99376);function d(){let{user:e,login:a,loading:s}=(0,c.a)(),d=(0,u.useRouter)(),{register:m,handleSubmit:f,formState:{errors:p,isSubmitting:h}}=(0,n.cI)({resolver:(0,o.F)(i.pj)});(0,r.useEffect)(()=>{if(!s&&e){var a;let e=new URLSearchParams(window.location.search),s=null!==(a=null==e?void 0:e.get("redirect"))&&void 0!==a?a:"/auth/dashboard";d.replace(s)}},[s,e,d]);let g=async e=>{await a(e.email,e.password)};return(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 p-4",children:(0,t.jsxs)("form",{onSubmit:f(g),className:"w-full max-w-sm space-y-4 rounded-lg bg-white p-6 shadow",children:[(0,t.jsx)("h1",{className:"text-center text-2xl font-semibold",children:"Entrar"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Email"}),(0,t.jsx)("input",{type:"email",...m("email"),className:"mt-1 w-full rounded border p-2"}),p.email&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:p.email.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Senha"}),(0,t.jsx)("input",{type:"password",...m("password"),className:"mt-1 w-full rounded border p-2"}),p.password&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:p.password.message})]}),(0,t.jsx)("button",{type:"submit",disabled:h||s,className:"w-full rounded bg-primary-500 py-2 font-semibold text-white disabled:opacity-50",children:h?"Entrando...":"Entrar"}),(0,t.jsxs)("p",{className:"text-center text-sm",children:["N\xe3o possui conta?"," ",(0,t.jsx)(l.default,{href:"/cadastro",className:"text-primary-600 hover:underline",children:"Cadastre-se"})]})]})})}},84832:function(e,a,s){"use strict";s.d(a,{a:function(){return u}});var t=s(2265),r=s(46410),n=s(43301),o=s(64131),i=s(738),c=s(82650);function l(e,a){let s=function(){try{let e=(0,i.C6)().length>0?(0,i.C6)()[0]:(0,i.ZF)({apiKey:"AIzaSyAxDEIXRouCF63f9GK-ShqzTaKQhQIjvyw",authDomain:"controle-horarios-medicos.firebaseapp.com",projectId:"controle-horarios-medicos",storageBucket:"controle-horarios-medicos.firebasestorage.app",messagingSenderId:"977729325505",appId:"1:977729325505:web:82fe901b78d874ef81c740",measurementId:"YOUR_MEASUREMENT_ID"});return c.getAnalytics(e)}catch(e){return console.warn("Analytics init falhou",e),null}}();s&&c.logEvent(s,e,a)}function u(){let[e,a]=(0,t.useState)(null),[s,i]=(0,t.useState)(!0);(0,t.useEffect)(()=>{let e=(0,n.Aj)(r.I,async e=>{if(a(e),e){let a=await e.getIdToken();o.Z.set("auth-token",a,{expires:1}),localStorage.setItem("user",JSON.stringify({uid:e.uid,email:e.email}))}else o.Z.remove("auth-token"),localStorage.removeItem("user");i(!1)}),s=(0,n.MX)(r.I,async e=>{if(e){let a=await e.getIdToken();o.Z.set("auth-token",a,{expires:1})}});return()=>{e(),s()}},[]);let c=(0,t.useCallback)(async(e,a)=>{await (0,n.e5)(r.I,e,a),l("login_success")},[]);return{user:e,loading:s,login:c,register:(0,t.useCallback)(async(e,a)=>{await (0,n.Xb)(r.I,e,a),l("register_success")},[]),logout:(0,t.useCallback)(async()=>{await (0,n.w7)(r.I),l("logout")},[]),resetPassword:(0,t.useCallback)(async e=>{await (0,n.LS)(r.I,e)},[])}}},46410:function(e,a,s){"use strict";let t;s.d(a,{I:function(){return c},db:function(){return l}});var r,n=s(738),o=s(43301),i=s(5978);t=null!==(r=window._firebaseApp)&&void 0!==r?r:(0,n.ZF)({apiKey:"AIzaSyAxDEIXRouCF63f9GK-ShqzTaKQhQIjvyw",authDomain:"controle-horarios-medicos.firebaseapp.com",projectId:"controle-horarios-medicos",storageBucket:"controle-horarios-medicos.firebasestorage.app",messagingSenderId:"977729325505",appId:"1:977729325505:web:82fe901b78d874ef81c740",measurementId:"YOUR_MEASUREMENT_ID"}),window._firebaseApp=t;let c=(0,o.v0)(t),l=(0,i.ad)(t)},75426:function(e,a,s){"use strict";s.d(a,{I_:function(){return o},Tu:function(){return n},pj:function(){return r}});var t=s(91115);let r=t.z.object({email:t.z.string().email({message:"Email inv\xe1lido"}),password:t.z.string().min(6,{message:"M\xednimo 6 caracteres"})}),n=r.extend({confirmPassword:t.z.string()}).refine(e=>e.password===e.confirmPassword,{message:"As senhas n\xe3o coincidem",path:["confirmPassword"]}),o=t.z.object({data:t.z.string().regex(/^\d{4}-\d{2}-\d{2}$/,{message:"Data deve estar no formato YYYY-MM-DD"}),horaEntrada:t.z.string().regex(/^([01]?\d|2[0-3]):[0-5]\d$/,{message:"Hora inv\xe1lida"}),horaSaida:t.z.string().regex(/^([01]?\d|2[0-3]):[0-5]\d$/,{message:"Hora inv\xe1lida"}),tipo:t.z.enum(["trabalho","sobreaviso_acionado","sobreaviso_nao_acionado"]),observacoes:t.z.string().max(500).optional()}).refine(e=>{let[a,s]=e.horaEntrada.split(":").map(Number),[t,r]=e.horaSaida.split(":").map(Number),n=60*a+s,o=60*t+r;return o<n&&(o+=1440),o>n},{message:"Hora de sa\xedda n\xe3o pode ser anterior \xe0 entrada",path:["horaSaida"]})}},function(e){e.O(0,[358,237,996,553,990,162,648,544,971,117,744],function(){return e(e.s=17790)}),_N_E=e.O()}]);