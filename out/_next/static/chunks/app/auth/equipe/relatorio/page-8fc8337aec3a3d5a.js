(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[116],{32576:function(e,t,a){Promise.resolve().then(a.bind(a,82555))},82555:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return n}});var s=a(57437);a(2265);var i=a(96840),r=a(35108);function n(){let e=(0,r.Y)();return(0,s.jsx)(i.Z,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Relat\xf3rio Consolidado (m\xeas atual)"}),0===e.length?(0,s.jsx)("p",{className:"text-gray-600",children:"Sem registros."}):(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 rounded-lg bg-white shadow-sm",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Equipe"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Horas Trabalho"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Horas Sobreaviso"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200",children:e.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"whitespace-nowrap px-4 py-2",children:e.equipeNome}),(0,s.jsx)("td",{className:"whitespace-nowrap px-4 py-2",children:e.horasTrabalho.toFixed(1)}),(0,s.jsx)("td",{className:"whitespace-nowrap px-4 py-2",children:e.horasSobreaviso.toFixed(1)})]},e.equipeId))})]})]})})}},96840:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var s=a(57437),i=a(2265),r=a(84832),n=a(46410),o=a(43301),l=a(13491),c=a(99376);function d(e){let{children:t}=e,{role:a,loading:d}=function(){let{user:e}=(0,r.a)(),[t,a]=(0,i.useState)("member"),[s,c]=(0,i.useState)(!0);async function d(e){if(!e){a("member"),c(!1);return}a("admin"===(await e.getIdTokenResult(!0)).claims.role?"admin":"member"),c(!1)}return(0,i.useEffect)(()=>{d(e)},[e]),(0,i.useEffect)(()=>{let e=(0,o.MX)(n.I,e=>{d(e)});return()=>e()},[]),{role:t,setRole:(0,i.useCallback)(async t=>{if(!e)return;let a=(0,l.$C)(),s=(0,l.V1)(a,"setUserRole");await s({uid:e.uid,role:t}),await e.getIdToken(!0)},[e]),loading:s}}(),u=(0,c.useRouter)();return((0,i.useEffect)(()=>{d||"admin"===a||u.replace("/")},[d,a,u]),d)?(0,s.jsx)("p",{className:"p-4 text-center text-gray-600",children:"Verificando permiss\xf5es..."}):"admin"!==a?(0,s.jsx)("p",{className:"p-4 text-center text-gray-600",children:"Acesso restrito aos administradores..."}):(0,s.jsx)(s.Fragment,{children:t})}},84832:function(e,t,a){"use strict";a.d(t,{a:function(){return m}});var s=a(2265),i=a(46410),r=a(43301),n=a(64131),o=a(738),l=a(76834);function c(e,t){let a=function(){try{let e=(0,o.C6)().length>0?(0,o.C6)()[0]:(0,o.ZF)({apiKey:"AIzaSyAxDEIXRouCF63f9GK-ShqzTaKQhQIjvyw",authDomain:"controle-horarios-medicos.firebaseapp.com",projectId:"controle-horarios-medicos",storageBucket:"controle-horarios-medicos.firebasestorage.app",messagingSenderId:"977729325505",appId:"1:977729325505:web:82fe901b78d874ef81c740",measurementId:"YOUR_MEASUREMENT_ID"});return l.getAnalytics(e)}catch(e){return console.warn("Analytics init falhou",e),null}}();a&&l.logEvent(a,e,t)}var d=a(5978),u=a(1186);function m(){let[e,t]=(0,s.useState)(null),[a,o]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=(0,r.Aj)(i.I,async e=>{if(t(e),e){var a,s,r;let t=await e.getIdToken();n.Z.set("auth-token",t,{expires:1}),localStorage.setItem("user",JSON.stringify({uid:e.uid,email:e.email}));let o=(0,d.JU)(i.db,"users",e.uid);(await (0,d.QT)(o)).exists()||await (0,d.pl)(o,{email:e.email,nome:null!==(s=e.displayName)&&void 0!==s?s:"",role:"medico",createdAt:Date.now(),updatedAt:Date.now(),isActive:!0});let l=(await (0,d.QT)(o)).data();l&&!l.equipeId&&e.email&&await (0,u.Ol)(e.uid,e.email);let c=null!==(r=null===(a=(await (0,d.QT)(o)).data())||void 0===a?void 0:a.equipeId)&&void 0!==r?r:"";localStorage.setItem("equipeId",c)}else n.Z.remove("auth-token"),localStorage.removeItem("user");o(!1)}),a=(0,r.MX)(i.I,async e=>{if(e){let t=await e.getIdToken();n.Z.set("auth-token",t,{expires:1})}});return()=>{e(),a()}},[]);let l=(0,s.useCallback)(async(e,t)=>{await (0,r.e5)(i.I,e,t),c("login_success")},[]);return{user:e,loading:a,login:l,register:(0,s.useCallback)(async(e,t)=>{let a=await (0,r.Xb)(i.I,e,t);await (0,d.pl)((0,d.JU)(i.db,"users",a.user.uid),{email:e,nome:"",role:"medico",createdAt:Date.now(),updatedAt:Date.now(),isActive:!0}),c("register_success")},[]),logout:(0,s.useCallback)(async()=>{await (0,r.w7)(i.I),c("logout")},[]),resetPassword:(0,s.useCallback)(async e=>{await (0,r.LS)(i.I,e)},[])}}},1186:function(e,t,a){"use strict";a.d(t,{Cm:function(){return n},Lq:function(){return o},Ol:function(){return l}});var s=a(46410),i=a(66629),r=a(5978);async function n(e,t,a){let i=(0,r.JU)((0,r.hJ)(s.db,"equipes")),n={id:i.id,nome:t,adminId:e,membros:[e],invites:[],timezone:a,createdAt:Date.now(),isActive:!0};return await (0,r.pl)(i,n),await (0,r.r7)((0,r.JU)(s.db,"users",e),{equipeId:i.id,role:"admin_equipe",updatedAt:(0,r.Bt)()}),i.id}async function o(e,t){let a=(0,i.x0)(8);return await (0,r.r7)((0,r.JU)(s.db,"equipes",e),{invites:(0,r.vr)({email:t,code:a,status:"pending"})}),a}async function l(e,t){let a=(0,r.IO)((0,r.hJ)(s.db,"equipes"),(0,r.ar)("invites","array-contains",{code:t,status:"pending"})),i=await (0,r.PL)(a);if(i.empty)return console.error("Nenhum convite encontrado com o c\xf3digo:",t),!1;let n=i.docs[0],o=n.id,l=n.data().invites.map(e=>e.code===t?{...e,status:"accepted"}:e);return await (0,r.r7)(n.ref,{membros:(0,r.vr)(e),invites:l}),await (0,r.r7)((0,r.JU)(s.db,"users",e),{equipeId:o,role:"medico",updatedAt:(0,r.Bt)()}),!0}}},function(e){e.O(0,[358,237,188,909,375,108,971,117,744],function(){return e(e.s=32576)}),_N_E=e.O()}]);