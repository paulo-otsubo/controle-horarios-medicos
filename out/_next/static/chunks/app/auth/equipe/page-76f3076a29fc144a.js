(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[94],{1991:function(e,t,n){Promise.resolve().then(n.bind(n,3143))},3143:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var r=n(57437),a=n(2265),i=n(27648),s=n(31526),o=n(84832),l=n(5978),u=n(46410),c=n(1186),d=n(12381);let m=a.forwardRef(function(e,t){let{title:n,titleId:r,...i}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}),f=a.forwardRef(function(e,t){let{title:n,titleId:r,...i}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}),p=a.forwardRef(function(e,t){let{title:n,titleId:r,...i}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))});var h=n(96840);function v(){let e=(0,s.t)(),{user:t}=(0,o.a)(),n=function(e){let[t,n]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let t=!0;async function r(){let r=[];for(let t of e){let e=await (0,l.QT)((0,l.JU)(u.db,"users",t));if(e.exists()){let n=e.data();r.push({uid:t,email:n.email,nome:n.nome})}}t&&n(r)}return e.length&&r(),()=>{t=!1}},[e]),t}((null==e?void 0:e.membros)||[]),[v,g]=(0,a.useState)(""),[x,b]=(0,a.useState)(null),[y,w]=(0,a.useState)(!1),j=e&&t&&e.adminId===t.uid;async function N(){e&&(w(!0),b(await (0,c.Lq)(e.id,v)),w(!1))}return(0,r.jsx)(h.Z,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Sua Equipe"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Gerencie os membros da sua equipe e envie convites."})]}),(0,r.jsx)(d.z,{asChild:!0,children:(0,r.jsxs)(i.default,{href:"/auth/equipe/nova",children:[(0,r.jsx)(m,{className:"mr-2 size-4"}),"Nova Equipe"]})})]}),e?(0,r.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",children:e.nome}),e.descricao&&(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.descricao})]}),(0,r.jsx)("h3",{className:"text-md mb-2 font-semibold text-gray-800",children:"Membros"}),(0,r.jsx)("ul",{className:"mb-6 space-y-2",children:n.map(t=>(0,r.jsxs)("li",{className:"flex items-center justify-between rounded-lg border bg-gray-50 p-3 shadow-sm",children:[(0,r.jsx)("span",{className:"font-medium text-gray-800",children:t.nome||t.email}),t.uid===e.adminId&&(0,r.jsx)("span",{className:"rounded-full bg-purple-500 px-2 py-0.5 text-xs font-semibold text-white",children:"Admin"})]},t.uid))}),j&&(0,r.jsxs)("div",{className:"space-y-4 rounded-lg border bg-gray-50 p-4 shadow-sm",children:[(0,r.jsxs)("h3",{className:"flex items-center gap-2 font-medium text-gray-800",children:[(0,r.jsx)(f,{className:"size-5"}),"Convidar novo membro"]}),(0,r.jsx)("input",{type:"email",value:v,onChange:e=>g(e.target.value),placeholder:"email@exemplo.com",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500"}),x&&(0,r.jsxs)("p",{className:"rounded-md bg-green-50 p-2 text-sm text-gray-600",children:["C\xf3digo de convite: ",(0,r.jsx)("span",{className:"font-mono text-green-700",children:x})]}),(0,r.jsx)(d.z,{disabled:y||!v.includes("@"),onClick:N,className:"w-full",children:y?"Gerando convite...":"Gerar Convite"})]})]}):(0,r.jsxs)("div",{className:"rounded-lg bg-white py-12 text-center shadow-sm",children:[(0,r.jsx)(p,{className:"mx-auto size-12 text-gray-400"}),(0,r.jsx)("h2",{className:"mt-2 text-lg font-medium text-gray-900",children:"Nenhuma equipe encontrada"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Voc\xea ainda n\xe3o faz parte de uma equipe. Crie uma ou pe\xe7a um convite."}),(0,r.jsxs)("div",{className:"mt-6 flex justify-center gap-4",children:[(0,r.jsx)(d.z,{asChild:!0,children:(0,r.jsxs)(i.default,{href:"/auth/equipe/nova",children:[(0,r.jsx)(m,{className:"mr-2 size-4"}),"Criar Nova Equipe"]})}),(0,r.jsx)(d.z,{asChild:!0,variant:"outline",children:(0,r.jsxs)(i.default,{href:"/auth/equipe/join",children:[(0,r.jsx)(f,{className:"mr-2 size-4"}),"Entrar com C\xf3digo"]})})]})]})]})})}},96840:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(57437),a=n(2265),i=n(84832),s=n(46410),o=n(43301),l=n(13491),u=n(99376);function c(e){let{children:t}=e,{role:n,loading:c}=function(){let{user:e}=(0,i.a)(),[t,n]=(0,a.useState)("member"),[r,u]=(0,a.useState)(!0);async function c(e){if(!e){n("member"),u(!1);return}n("admin"===(await e.getIdTokenResult(!0)).claims.role?"admin":"member"),u(!1)}return(0,a.useEffect)(()=>{c(e)},[e]),(0,a.useEffect)(()=>{let e=(0,o.MX)(s.I,e=>{c(e)});return()=>e()},[]),{role:t,setRole:(0,a.useCallback)(async t=>{if(!e)return;let n=(0,l.$C)(),r=(0,l.V1)(n,"setUserRole");await r({uid:e.uid,role:t}),await e.getIdToken(!0)},[e]),loading:r}}(),d=(0,u.useRouter)();return((0,a.useEffect)(()=>{c||"admin"===n||d.replace("/")},[c,n,d]),c)?(0,r.jsx)("p",{className:"p-4 text-center text-gray-600",children:"Verificando permiss\xf5es..."}):"admin"!==n?(0,r.jsx)("p",{className:"p-4 text-center text-gray-600",children:"Acesso restrito aos administradores..."}):(0,r.jsx)(r.Fragment,{children:t})}},12381:function(e,t,n){"use strict";n.d(t,{z:function(){return u}});var r=n(57437),a=n(2265),i=n(37053),s=n(90535),o=n(93448);let l=(0,s.j)("ring-offset-background focus-visible:ring-ring inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border-input bg-background hover:bg-accent hover:text-accent-foreground border",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"size-10"}},defaultVariants:{variant:"default",size:"default"}}),u=a.forwardRef((e,t)=>{let{className:n,variant:a,size:s,asChild:u=!1,...c}=e,d=u?i.g7:"button";return(0,r.jsx)(d,{className:(0,o.cn)(l({variant:a,size:s,className:n})),ref:t,...c})});u.displayName="Button"},84832:function(e,t,n){"use strict";n.d(t,{a:function(){return m}});var r=n(2265),a=n(46410),i=n(43301),s=n(64131),o=n(738),l=n(76834);function u(e,t){let n=function(){try{let e=(0,o.C6)().length>0?(0,o.C6)()[0]:(0,o.ZF)({apiKey:"AIzaSyAxDEIXRouCF63f9GK-ShqzTaKQhQIjvyw",authDomain:"controle-horarios-medicos.firebaseapp.com",projectId:"controle-horarios-medicos",storageBucket:"controle-horarios-medicos.firebasestorage.app",messagingSenderId:"977729325505",appId:"1:977729325505:web:82fe901b78d874ef81c740",measurementId:"YOUR_MEASUREMENT_ID"});return l.getAnalytics(e)}catch(e){return console.warn("Analytics init falhou",e),null}}();n&&l.logEvent(n,e,t)}var c=n(5978),d=n(1186);function m(){let[e,t]=(0,r.useState)(null),[n,o]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=(0,i.Aj)(a.I,async e=>{if(t(e),e){var n,r,i;let t=await e.getIdToken();s.Z.set("auth-token",t,{expires:1}),localStorage.setItem("user",JSON.stringify({uid:e.uid,email:e.email}));let o=(0,c.JU)(a.db,"users",e.uid);(await (0,c.QT)(o)).exists()||await (0,c.pl)(o,{email:e.email,nome:null!==(r=e.displayName)&&void 0!==r?r:"",role:"medico",createdAt:Date.now(),updatedAt:Date.now(),isActive:!0});let l=(await (0,c.QT)(o)).data();l&&!l.equipeId&&e.email&&await (0,d.Ol)(e.uid,e.email);let u=null!==(i=null===(n=(await (0,c.QT)(o)).data())||void 0===n?void 0:n.equipeId)&&void 0!==i?i:"";localStorage.setItem("equipeId",u)}else s.Z.remove("auth-token"),localStorage.removeItem("user");o(!1)}),n=(0,i.MX)(a.I,async e=>{if(e){let t=await e.getIdToken();s.Z.set("auth-token",t,{expires:1})}});return()=>{e(),n()}},[]);let l=(0,r.useCallback)(async(e,t)=>{await (0,i.e5)(a.I,e,t),u("login_success")},[]);return{user:e,loading:n,login:l,register:(0,r.useCallback)(async(e,t)=>{let n=await (0,i.Xb)(a.I,e,t);await (0,c.pl)((0,c.JU)(a.db,"users",n.user.uid),{email:e,nome:"",role:"medico",createdAt:Date.now(),updatedAt:Date.now(),isActive:!0}),u("register_success")},[]),logout:(0,r.useCallback)(async()=>{await (0,i.w7)(a.I),u("logout")},[]),resetPassword:(0,r.useCallback)(async e=>{await (0,i.LS)(a.I,e)},[])}}},31526:function(e,t,n){"use strict";n.d(t,{t:function(){return o}});var r=n(2265),a=n(5978),i=n(84832),s=n(46410);function o(){let{user:e}=(0,i.a)(),[t,n]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(!e)return;let t=null,r=(0,a.cf)((0,a.JU)(s.db,"users",e.uid),e=>{let r=e.data(),i=null==r?void 0:r.equipeId;i?(localStorage.setItem("equipeId",i),t&&t(),t=(0,a.cf)((0,a.JU)(s.db,"equipes",i),e=>{n(e.exists()?e.data():null)})):(t&&(t(),t=null),n(null))});return()=>{r(),t&&t()}},[e]),t}},46410:function(e,t,n){"use strict";let r;n.d(t,{I:function(){return l},db:function(){return u}});var a,i=n(738),s=n(43301),o=n(5978);r=null!==(a=window._firebaseApp)&&void 0!==a?a:(0,i.ZF)({apiKey:"AIzaSyAxDEIXRouCF63f9GK-ShqzTaKQhQIjvyw",authDomain:"controle-horarios-medicos.firebaseapp.com",projectId:"controle-horarios-medicos",storageBucket:"controle-horarios-medicos.firebasestorage.app",messagingSenderId:"977729325505",appId:"1:977729325505:web:82fe901b78d874ef81c740",measurementId:"YOUR_MEASUREMENT_ID"}),window._firebaseApp=r;let l=(0,s.v0)(r),u=(0,o.ad)(r);try{(0,o.ST)(u)}catch(e){e instanceof i.ZR&&("failed-precondition"===e.code?console.warn("A persist\xeancia do Firestore falhou. Isso geralmente ocorre se voc\xea tiver v\xe1rias abas abertas. Os dados n\xe3o ser\xe3o salvos offline nesta aba."):"unimplemented"===e.code&&console.warn("O navegador atual n\xe3o suporta persist\xeancia offline do Firestore."))}},1186:function(e,t,n){"use strict";n.d(t,{Cm:function(){return s},Lq:function(){return o},Ol:function(){return l}});var r=n(46410),a=n(66629),i=n(5978);async function s(e,t,n){let a=(0,i.JU)((0,i.hJ)(r.db,"equipes")),s={id:a.id,nome:t,adminId:e,membros:[e],invites:[],timezone:n,createdAt:Date.now(),isActive:!0};return await (0,i.pl)(a,s),await (0,i.r7)((0,i.JU)(r.db,"users",e),{equipeId:a.id,role:"admin_equipe",updatedAt:(0,i.Bt)()}),a.id}async function o(e,t){let n=(0,a.x0)(8);return await (0,i.r7)((0,i.JU)(r.db,"equipes",e),{invites:(0,i.vr)({email:t,code:n,status:"pending"})}),n}async function l(e,t){let n=(0,i.IO)((0,i.hJ)(r.db,"equipes"),(0,i.ar)("invites","array-contains",{code:t,status:"pending"})),a=await (0,i.PL)(n);if(a.empty)return console.error("Nenhum convite encontrado com o c\xf3digo:",t),!1;let s=a.docs[0],o=s.id,l=s.data().invites.map(e=>e.code===t?{...e,status:"accepted"}:e);return await (0,i.r7)(s.ref,{membros:(0,i.vr)(e),invites:l}),await (0,i.r7)((0,i.JU)(r.db,"users",e),{equipeId:o,role:"medico",updatedAt:(0,i.Bt)()}),!0}},93448:function(e,t,n){"use strict";n.d(t,{cn:function(){return i}});var r=n(61994),a=n(53335);function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.m6)((0,r.W)(t))}},98575:function(e,t,n){"use strict";n.d(t,{F:function(){return i},e:function(){return s}});var r=n(2265);function a(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function i(...e){return t=>{let n=!1,r=e.map(e=>{let r=a(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){let n=r[t];"function"==typeof n?n():a(e[t],null)}}}}function s(...e){return r.useCallback(i(...e),e)}},37053:function(e,t,n){"use strict";n.d(t,{Z8:function(){return s},g7:function(){return o}});var r=n(2265),a=n(98575),i=n(57437);function s(e){let t=function(e){let t=r.forwardRef((e,t)=>{let{children:n,...i}=e;if(r.isValidElement(n)){let e,s;let o=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.props.ref:n.props.ref||n.ref,l=function(e,t){let n={...t};for(let r in t){let a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...e)=>{let t=i(...e);return a(...e),t}:a&&(n[r]=a):"style"===r?n[r]={...a,...i}:"className"===r&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}(i,n.props);return n.type!==r.Fragment&&(l.ref=t?(0,a.F)(t,o):o),r.cloneElement(n,l)}return r.Children.count(n)>1?r.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),n=r.forwardRef((e,n)=>{let{children:a,...s}=e,o=r.Children.toArray(a),l=o.find(u);if(l){let e=l.props.children,a=o.map(t=>t!==l?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,i.jsx)(t,{...s,ref:n,children:r.isValidElement(e)?r.cloneElement(e,void 0,a):null})}return(0,i.jsx)(t,{...s,ref:n,children:a})});return n.displayName=`${e}.Slot`,n}var o=s("Slot"),l=Symbol("radix.slottable");function u(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===l}},90535:function(e,t,n){"use strict";n.d(t,{j:function(){return s}});var r=n(61994);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,i=r.W,s=(e,t)=>n=>{var r;if((null==t?void 0:t.variants)==null)return i(e,null==n?void 0:n.class,null==n?void 0:n.className);let{variants:s,defaultVariants:o}=t,l=Object.keys(s).map(e=>{let t=null==n?void 0:n[e],r=null==o?void 0:o[e];if(null===t)return null;let i=a(t)||a(r);return s[e][i]}),u=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{});return i(e,l,null==t?void 0:null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r,...a}=t;return Object.entries(a).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...o,...u}[t]):({...o,...u})[t]===n})?[...e,n,r]:e},[]),null==n?void 0:n.class,null==n?void 0:n.className)}}},function(e){e.O(0,[358,237,188,909,137,648,375,971,117,744],function(){return e(e.s=1991)}),_N_E=e.O()}]);