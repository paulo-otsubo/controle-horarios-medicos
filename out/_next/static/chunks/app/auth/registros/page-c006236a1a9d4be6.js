(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[579],{7122:function(e,a,t){Promise.resolve().then(t.bind(t,96403))},96403:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return J}});var r=t(57437),s=t(2265),o=t(77280),i=t(27072),n=t(55428),d=t(89934),l=t(73747),c=t(99376),u=t(12594),m=t(61601),f=t(41077),p=t(20322),v=t(45402),g=t(93448),b=t(73247);let h={trabalho:{label:"Trabalho",className:"bg-primary/10 text-primary"},sobreaviso_acionado:{label:"Sobreaviso Acionado",className:"bg-warning/20 text-warning-foreground"},sobreaviso_nao_acionado:{label:"Sobreaviso",className:"bg-purple-100 text-purple-800"}};function x(e){let{registro:a,onDelete:t}=e,o=(0,c.useRouter)(),{vibrateSuccess:x}=(0,n.$)(),y=(0,i.QS)({onSwipedLeft:()=>{window.confirm("Tem certeza que deseja apagar este registro?")&&(x(),t())},onSwipedRight:()=>{x(),o.push("/auth/registros?edit=".concat(a.id))},trackTouch:!0,delta:60}),j=a.horaSaida?"".concat(a.horaEntrada," â†’ ").concat(a.horaSaida):"".concat(a.horaEntrada," â†’ Presente"),{label:w,className:N}=h[a.tipo],I=new Date("".concat(a.data,"T00:00:00")),S=a.tipo.includes("sobreaviso"),z=s.useMemo(()=>{if(!S||!a.sobreavisoInicio||!a.sobreavisoFim)return null;try{let e=(0,d.Z)(a.sobreavisoInicio,"yyyy-MM-dd HH:mm",new Date),t=(0,d.Z)(a.sobreavisoFim,"yyyy-MM-dd HH:mm",new Date);return{inicio:(0,l.Z)(e,"dd/MM '\xe0s' HH:mm",{locale:b.Z}),fim:(0,l.Z)(t,"dd/MM '\xe0s' HH:mm",{locale:b.Z})}}catch(e){return null}},[S,a.sobreavisoInicio,a.sobreavisoFim]);return(0,r.jsxs)("div",{...y,className:"bg-card group relative rounded-lg border p-4",children:[(0,r.jsxs)("div",{className:"absolute right-4 top-4 flex items-center space-x-2 opacity-0 transition-opacity group-hover:opacity-100",children:[(0,r.jsx)("button",{onClick:()=>o.push("/auth/registros?edit=".concat(a.id)),className:"hover:bg-secondary rounded-full p-1.5",children:(0,r.jsx)(u.Z,{className:"text-muted-foreground size-4"})}),(0,r.jsx)("button",{onClick:t,className:"hover:bg-destructive/10 rounded-full p-1.5",children:(0,r.jsx)(m.Z,{className:"text-destructive/80 size-4"})})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("p",{className:"text-foreground flex items-center gap-2 text-sm font-medium",children:[(0,r.jsx)(f.Z,{className:"text-muted-foreground size-4"}),(0,l.Z)(I,"EEE, dd 'de' MMMM",{locale:b.Z})]}),(0,r.jsx)("span",{className:(0,g.cn)("rounded-full px-2.5 py-0.5 text-xs font-semibold",N),children:w})]}),(0,r.jsxs)("div",{className:"text-muted-foreground flex items-center space-x-2",children:[(0,r.jsx)(p.Z,{className:"size-4"}),(0,r.jsx)("p",{className:"text-foreground text-base",children:j})]}),z&&(0,r.jsxs)("div",{className:"rounded-md bg-purple-50 p-2 text-sm",children:[(0,r.jsxs)("div",{className:"mb-1 flex items-center gap-1 font-medium text-purple-700",children:[(0,r.jsx)(v.Z,{className:"size-4"}),"Per\xedodo Programado"]}),(0,r.jsxs)("div",{className:"text-purple-600",children:[(0,r.jsxs)("div",{children:["In\xedcio: ",z.inicio]}),(0,r.jsxs)("div",{children:["Fim: ",z.fim]})]})]}),a.observacoes&&(0,r.jsx)("p",{className:"text-muted-foreground pt-2 text-sm",children:a.observacoes})]})]})}var y=t(29501),j=t(80845),w=t(75426),N=t(66629),I=t(84832),S=t(31526),z=t(12381),E=t(40279),A=t(75060),_=t(23675),F=t(54342),k=t(40875),Z=t(30401);let R=F.fC;F.ZA;let D=F.B4,M=s.forwardRef((e,a)=>{let{className:t,children:s,...o}=e;return(0,r.jsxs)(F.xz,{ref:a,className:(0,g.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...o,children:[s,(0,r.jsx)(F.JO,{asChild:!0,children:(0,r.jsx)(k.Z,{className:"size-4 opacity-50"})})]})});M.displayName=F.xz.displayName;let C=s.forwardRef((e,a)=>{let{className:t,children:s,position:o="popper",...i}=e;return(0,r.jsx)(F.h_,{children:(0,r.jsx)(F.VY,{ref:a,className:(0,g.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===o&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:o,...i,children:(0,r.jsx)(F.l_,{className:(0,g.cn)("p-1","popper"===o&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s})})})});C.displayName=F.VY.displayName,s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(F.__,{ref:a,className:(0,g.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s})}).displayName=F.__.displayName;let U=s.forwardRef((e,a)=>{let{className:t,children:s,...o}=e;return(0,r.jsxs)(F.ck,{ref:a,className:(0,g.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...o,children:[(0,r.jsx)("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:(0,r.jsx)(F.wU,{children:(0,r.jsx)(Z.Z,{className:"size-4"})})}),(0,r.jsx)(F.eT,{children:s})]})});function T(e){var a,t,s,i;let{existing:d,onSuccess:c}=e,u=(0,o.F)(e=>e.addRegistro),m=(0,o.F)(e=>e.updateRegistro),{user:f}=(0,I.a)(),p=(0,S.t)(),{vibrateSuccess:v,vibrateError:g}=(0,n.$)(),{register:b,handleSubmit:h,formState:{errors:x,isSubmitting:F},control:k}=(0,y.cI)({resolver:(0,j.F)(w.I_),defaultValues:d?{...d,observacoes:null!==(a=d.observacoes)&&void 0!==a?a:"",sobreavisoInicio:null!==(t=d.sobreavisoInicio)&&void 0!==t?t:void 0,sobreavisoFim:null!==(s=d.sobreavisoFim)&&void 0!==s?s:void 0,sobreavisoAtivo:null!==(i=d.sobreavisoAtivo)&&void 0!==i?i:void 0}:{data:(0,l.Z)(new Date,"yyyy-MM-dd"),horaEntrada:"",horaSaida:"",tipo:"trabalho",observacoes:"",sobreavisoInicio:void 0,sobreavisoFim:void 0,sobreavisoAtivo:void 0}}),Z=async e=>{if(d&&d.id)await m(d.id,{data:e.data,horaEntrada:e.horaEntrada,horaSaida:e.horaSaida,tipo:e.tipo,observacoes:e.observacoes,sobreavisoInicio:e.sobreavisoInicio,sobreavisoFim:e.sobreavisoFim,sobreavisoAtivo:e.sobreavisoAtivo,updatedAt:new Date().toISOString()});else{var a,t;if(!f){g(),alert("Usu\xe1rio n\xe3o autenticado.");return}let r={id:(0,N.x0)(),usuarioId:f.uid,equipeId:null!==(t=null!==(a=null==p?void 0:p.id)&&void 0!==a?a:localStorage.getItem("equipeId"))&&void 0!==t?t:"",data:e.data,horaEntrada:e.horaEntrada,horaSaida:e.horaSaida,tipo:e.tipo,observacoes:e.observacoes,sobreavisoInicio:e.sobreavisoInicio,sobreavisoFim:e.sobreavisoFim,sobreavisoAtivo:e.sobreavisoAtivo,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isDeleted:!1};try{await u(r)}catch(e){console.error("Falha ao salvar no Firestore:",e),g(),alert("Falha ao salvar no Firestore. Verifique sua conex\xe3o ou permiss\xf5es.");return}}v(),null==c||c()};return(0,r.jsxs)("form",{onSubmit:h(Z),className:"space-y-6 p-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(A._,{htmlFor:"data",children:"Data"}),(0,r.jsx)(E.I,{id:"data",type:"date",...b("data")}),x.data&&(0,r.jsx)("p",{className:"text-destructive text-sm",children:x.data.message})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(A._,{htmlFor:"horaEntrada",children:"Entrada"}),(0,r.jsx)(E.I,{id:"horaEntrada",type:"time",...b("horaEntrada")}),x.horaEntrada&&(0,r.jsx)("p",{className:"text-destructive text-sm",children:x.horaEntrada.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(A._,{htmlFor:"horaSaida",children:"Sa\xedda"}),(0,r.jsx)(E.I,{id:"horaSaida",type:"time",...b("horaSaida")}),x.horaSaida&&(0,r.jsx)("p",{className:"text-destructive text-sm",children:x.horaSaida.message})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(A._,{htmlFor:"tipo",children:"Tipo"}),(0,r.jsx)(y.Qr,{name:"tipo",control:k,render:e=>{let{field:a}=e;return(0,r.jsxs)(R,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,r.jsx)(M,{id:"tipo",children:(0,r.jsx)(D,{placeholder:"Selecione o tipo"})}),(0,r.jsxs)(C,{children:[(0,r.jsx)(U,{value:"trabalho",children:"Trabalho"}),(0,r.jsx)(U,{value:"sobreaviso_acionado",children:"Sobreaviso acionado"}),(0,r.jsx)(U,{value:"sobreaviso_nao_acionado",children:"Sobreaviso n\xe3o acionado"})]})]})}}),x.tipo&&(0,r.jsx)("p",{className:"text-destructive text-sm",children:x.tipo.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(A._,{htmlFor:"observacoes",children:"Observa\xe7\xf5es"}),(0,r.jsx)(_.g,{id:"observacoes",...b("observacoes"),placeholder:"Algum detalhe sobre o plant\xe3o..."}),x.observacoes&&(0,r.jsx)("p",{className:"text-destructive text-sm",children:x.observacoes.message})]}),(0,r.jsx)(z.z,{type:"submit",disabled:F,className:"w-full",children:F?"Salvando...":"Salvar Registro"})]})}U.displayName=F.ck.displayName,s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(F.Z0,{ref:a,className:(0,g.cn)("-mx-1 my-1 h-px bg-muted",t),...s})}).displayName=F.Z0.displayName;var q=t(54887);function J(){let{registros:e,deleteRegistro:a}=(0,o.F)(),t=(0,c.useSearchParams)(),[i,n]=(0,s.useState)(null),[d,u]=(0,s.useState)("");(0,s.useEffect)(()=>{let a=t.get("edit");a?n(e.find(e=>e.id===a)||null):n(null)},[t,e]);let m=e=>{a(e)},f=[...e];d&&(f=f.filter(e=>e.data===d));let p=f.sort((e,a)=>e.data<a.data?1:-1);return(0,r.jsxs)("section",{className:"min-h-[calc(100vh-4rem)] bg-gray-50 p-4 md:p-6",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Seus Registros"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Visualize e gerencie todos os seus registros. Filtre por data para encontrar um dia espec\xedfico."})]}),(0,r.jsx)("input",{type:"date",value:d,onChange:e=>u(e.target.value),className:"rounded border p-2",max:(0,l.Z)(new Date,"yyyy-MM-dd")})]}),d&&(0,r.jsx)("button",{onClick:()=>u(""),className:"mb-4 text-sm text-primary-600 hover:underline",children:"Limpar Filtro"})]}),0===p.length?(0,r.jsxs)("div",{className:"py-12 text-center",children:[(0,r.jsx)("p",{className:"text-gray-600",children:"Voc\xea ainda n\xe3o tem registros."}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Use o dashboard para iniciar um novo registro."})]}):(0,r.jsx)("div",{className:"space-y-4",children:p.map(e=>(0,r.jsx)(x,{registro:e,onDelete:()=>m(e.id)},e.id))}),i&&(0,q.createPortal)((0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:(0,r.jsx)("div",{className:"w-full max-w-md rounded-lg bg-white shadow-lg",children:(0,r.jsx)(T,{existing:i,onSuccess:()=>{let e=new URL(window.location.href);e.searchParams.delete("edit"),window.history.replaceState(null,"",e.toString())}})})}),document.body)]})}},12381:function(e,a,t){"use strict";t.d(a,{z:function(){return l}});var r=t(57437),s=t(2265),o=t(37053),i=t(90535),n=t(93448);let d=(0,i.j)("ring-offset-background focus-visible:ring-ring inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border-input bg-background hover:bg-accent hover:text-accent-foreground border",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"size-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,a)=>{let{className:t,variant:s,size:i,asChild:l=!1,...c}=e,u=l?o.g7:"button";return(0,r.jsx)(u,{className:(0,n.cn)(d({variant:s,size:i,className:t})),ref:a,...c})});l.displayName="Button"},40279:function(e,a,t){"use strict";t.d(a,{I:function(){return i}});var r=t(57437),s=t(2265),o=t(93448);let i=s.forwardRef((e,a)=>{let{className:t,type:s,...i}=e;return(0,r.jsx)("input",{type:s,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...i})});i.displayName="Input"},75060:function(e,a,t){"use strict";t.d(a,{_:function(){return l}});var r=t(57437),s=t(2265),o=t(6394),i=t(90535),n=t(93448);let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(o.f,{ref:a,className:(0,n.cn)(d(),t),...s})});l.displayName=o.f.displayName},23675:function(e,a,t){"use strict";t.d(a,{g:function(){return i}});var r=t(57437),s=t(2265),o=t(93448);let i=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("textarea",{className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...s})});i.displayName="Textarea"},84832:function(e,a,t){"use strict";t.d(a,{a:function(){return m}});var r=t(2265),s=t(46410),o=t(43301),i=t(64131),n=t(738),d=t(76834);function l(e,a){let t=function(){try{let e=(0,n.C6)().length>0?(0,n.C6)()[0]:(0,n.ZF)({apiKey:"AIzaSyAxDEIXRouCF63f9GK-ShqzTaKQhQIjvyw",authDomain:"controle-horarios-medicos.firebaseapp.com",projectId:"controle-horarios-medicos",storageBucket:"controle-horarios-medicos.firebasestorage.app",messagingSenderId:"977729325505",appId:"1:977729325505:web:82fe901b78d874ef81c740",measurementId:"YOUR_MEASUREMENT_ID"});return d.getAnalytics(e)}catch(e){return console.warn("Analytics init falhou",e),null}}();t&&d.logEvent(t,e,a)}var c=t(5978),u=t(1186);function m(){let[e,a]=(0,r.useState)(null),[t,n]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=(0,o.Aj)(s.I,async e=>{if(a(e),e){var t,r,o;let a=await e.getIdToken();i.Z.set("auth-token",a,{expires:1}),localStorage.setItem("user",JSON.stringify({uid:e.uid,email:e.email}));let n=(0,c.JU)(s.db,"users",e.uid);(await (0,c.QT)(n)).exists()||await (0,c.pl)(n,{email:e.email,nome:null!==(r=e.displayName)&&void 0!==r?r:"",role:"medico",createdAt:Date.now(),updatedAt:Date.now(),isActive:!0});let d=(await (0,c.QT)(n)).data();d&&!d.equipeId&&e.email&&await (0,u.Ol)(e.uid,e.email);let l=null!==(o=null===(t=(await (0,c.QT)(n)).data())||void 0===t?void 0:t.equipeId)&&void 0!==o?o:"";localStorage.setItem("equipeId",l)}else i.Z.remove("auth-token"),localStorage.removeItem("user");n(!1)}),t=(0,o.MX)(s.I,async e=>{if(e){let a=await e.getIdToken();i.Z.set("auth-token",a,{expires:1})}});return()=>{e(),t()}},[]);let d=(0,r.useCallback)(async(e,a)=>{await (0,o.e5)(s.I,e,a),l("login_success")},[]);return{user:e,loading:t,login:d,register:(0,r.useCallback)(async(e,a)=>{let t=await (0,o.Xb)(s.I,e,a);await (0,c.pl)((0,c.JU)(s.db,"users",t.user.uid),{email:e,nome:"",role:"medico",createdAt:Date.now(),updatedAt:Date.now(),isActive:!0}),l("register_success")},[]),logout:(0,r.useCallback)(async()=>{await (0,o.w7)(s.I),l("logout")},[]),resetPassword:(0,r.useCallback)(async e=>{await (0,o.LS)(s.I,e)},[])}}},55428:function(e,a,t){"use strict";t.d(a,{$:function(){return s}});var r=t(91051);function s(){let e=(0,r.Z)(e=>e.vibration);function a(a){var t;let r=navigator;e&&(null===(t=r.vibrate)||void 0===t||t.call(r,a))}return{vibrateSuccess:()=>a(30),vibrateError:()=>a([20,30,20])}}},31526:function(e,a,t){"use strict";t.d(a,{t:function(){return n}});var r=t(2265),s=t(5978),o=t(84832),i=t(46410);function n(){let{user:e}=(0,o.a)(),[a,t]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(!e)return;let a=null,r=(0,s.cf)((0,s.JU)(i.db,"users",e.uid),e=>{let r=e.data(),o=null==r?void 0:r.equipeId;o?(localStorage.setItem("equipeId",o),a&&a(),a=(0,s.cf)((0,s.JU)(i.db,"equipes",o),e=>{t(e.exists()?e.data():null)})):(a&&(a(),a=null),t(null))});return()=>{r(),a&&a()}},[e]),a}},46410:function(e,a,t){"use strict";let r;t.d(a,{I:function(){return d},db:function(){return l}});var s,o=t(738),i=t(43301),n=t(5978);r=null!==(s=window._firebaseApp)&&void 0!==s?s:(0,o.ZF)({apiKey:"AIzaSyAxDEIXRouCF63f9GK-ShqzTaKQhQIjvyw",authDomain:"controle-horarios-medicos.firebaseapp.com",projectId:"controle-horarios-medicos",storageBucket:"controle-horarios-medicos.firebasestorage.app",messagingSenderId:"977729325505",appId:"1:977729325505:web:82fe901b78d874ef81c740",measurementId:"YOUR_MEASUREMENT_ID"}),window._firebaseApp=r;let d=(0,i.v0)(r),l=(0,n.ad)(r);try{(0,n.ST)(l)}catch(e){e instanceof o.ZR&&("failed-precondition"===e.code?console.warn("A persist\xeancia do Firestore falhou. Isso geralmente ocorre se voc\xea tiver v\xe1rias abas abertas. Os dados n\xe3o ser\xe3o salvos offline nesta aba."):"unimplemented"===e.code&&console.warn("O navegador atual n\xe3o suporta persist\xeancia offline do Firestore."))}},1186:function(e,a,t){"use strict";t.d(a,{Cm:function(){return i},Lq:function(){return n},Ol:function(){return d}});var r=t(46410),s=t(66629),o=t(5978);async function i(e,a,t){let s=(0,o.JU)((0,o.hJ)(r.db,"equipes")),i={id:s.id,nome:a,adminId:e,membros:[e],invites:[],timezone:t,createdAt:Date.now(),isActive:!0};return await (0,o.pl)(s,i),await (0,o.r7)((0,o.JU)(r.db,"users",e),{equipeId:s.id,role:"admin_equipe",updatedAt:(0,o.Bt)()}),s.id}async function n(e,a){let t=(0,s.x0)(8);return await (0,o.r7)((0,o.JU)(r.db,"equipes",e),{invites:(0,o.vr)({email:a,code:t,status:"pending"})}),t}async function d(e,a){let t=(0,o.IO)((0,o.hJ)(r.db,"equipes"),(0,o.ar)("invites","array-contains",{code:a,status:"pending"})),s=await (0,o.PL)(t);if(s.empty)return console.error("Nenhum convite encontrado com o c\xf3digo:",a),!1;let i=s.docs[0],n=i.id,d=i.data().invites.map(e=>e.code===a?{...e,status:"accepted"}:e);return await (0,o.r7)(i.ref,{membros:(0,o.vr)(e),invites:d}),await (0,o.r7)((0,o.JU)(r.db,"users",e),{equipeId:n,role:"medico",updatedAt:(0,o.Bt)()}),!0}},93448:function(e,a,t){"use strict";t.d(a,{cn:function(){return o}});var r=t(61994),s=t(53335);function o(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,s.m6)((0,r.W)(a))}},75426:function(e,a,t){"use strict";t.d(a,{I_:function(){return i},Tu:function(){return o},pj:function(){return s}});var r=t(91115);let s=r.z.object({email:r.z.string().email({message:"Email inv\xe1lido"}),password:r.z.string().min(6,{message:"M\xednimo 6 caracteres"})}),o=s.extend({confirmPassword:r.z.string()}).refine(e=>e.password===e.confirmPassword,{message:"As senhas n\xe3o coincidem",path:["confirmPassword"]});r.z.object({name:r.z.string().min(2,"Nome deve ter pelo menos 2 caracteres"),email:r.z.string().email("Email inv\xe1lido")});let i=r.z.object({data:r.z.string().regex(/^\d{4}-\d{2}-\d{2}$/,{message:"Data deve estar no formato YYYY-MM-DD"}),horaEntrada:r.z.string().regex(/^([01]?\d|2[0-3]):[0-5]\d$/,{message:"Hora inv\xe1lida"}),horaSaida:r.z.string().regex(/^([01]?\d|2[0-3]):[0-5]\d$/,{message:"Hora inv\xe1lida"}),tipo:r.z.enum(["trabalho","sobreaviso_acionado","sobreaviso_nao_acionado"]),observacoes:r.z.string().max(500).optional(),sobreavisoInicio:r.z.string().optional(),sobreavisoFim:r.z.string().optional(),sobreavisoAtivo:r.z.boolean().optional()}).refine(e=>{let[a,t]=e.horaEntrada.split(":").map(Number),[r,s]=e.horaSaida.split(":").map(Number),o=60*a+t,i=60*r+s;return i<o&&(i+=1440),i>o},{message:"Hora de sa\xedda n\xe3o pode ser anterior \xe0 entrada",path:["horaSaida"]});r.z.object({nome:r.z.string().min(1,"Nome \xe9 obrigat\xf3rio").max(100,"Nome muito longo"),descricao:r.z.string().max(500,"Descri\xe7\xe3o muito longa").optional()})},77280:function(e,a,t){"use strict";t.d(a,{F:function(){return n}});var r=t(3011),s=t(89134),o=t(46410),i=t(5978);let n=(0,r.U)()((0,s.tJ)(e=>({registros:[],addRegistro:async a=>{e(e=>({registros:[...e.registros,a]}));try{await (0,i.pl)((0,i.JU)(o.db,"registros",a.id),a)}catch(t){throw console.error("Erro ao salvar no Firestore",t),e(e=>({registros:e.registros.filter(e=>e.id!==a.id)})),t}},updateRegistro:async(a,t)=>{e(e=>({registros:e.registros.map(e=>e.id===a?{...e,...t}:e)}));try{await (0,i.r7)((0,i.JU)(o.db,"registros",a),t)}catch(e){console.error("Erro ao atualizar no Firestore",e)}},deleteRegistro:async a=>{e(e=>({registros:e.registros.filter(e=>e.id!==a)}));try{await (0,i.oe)((0,i.JU)(o.db,"registros",a))}catch(e){console.error("Erro ao deletar no Firestore",e)}},setRegistros:a=>e({registros:a})}),{name:"registro-store"}))},91051:function(e,a,t){"use strict";t.d(a,{Z:function(){return o}});var r=t(3011),s=t(89134);let o=(0,r.U)()((0,s.tJ)((e,a)=>({vibration:!0,sound:!0,confetti:!0,confirmEnd:!0,toggleVibration:()=>e({vibration:!a().vibration}),toggleSound:()=>e({sound:!a().sound}),toggleConfetti:()=>e({confetti:!a().confetti}),toggleConfirmEnd:()=>e({confirmEnd:!a().confirmEnd})}),{name:"ui-prefs"}))}},function(e){e.O(0,[358,237,188,909,137,544,127,432,971,117,744],function(){return e(e.s=7122)}),_N_E=e.O()}]);