(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[579],{7122:function(e,a,t){Promise.resolve().then(t.bind(t,59042))},99376:function(e,a,t){"use strict";var r=t(35475);t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},59042:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return j}});var r=t(57437),s=t(2265),o=t(77280),i=t(27072),n=t(55428),d=t(54754),l=t(99376);let c=s.forwardRef(function(e,a){let{title:t,titleId:r,...o}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},o),t?s.createElement("title",{id:r},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}),m=s.forwardRef(function(e,a){let{title:t,titleId:r,...o}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},o),t?s.createElement("title",{id:r},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});function u(e){let{registro:a,onDelete:t}=e,s=(0,l.useRouter)(),{vibrateSuccess:o}=(0,n.$)(),u=(0,i.QS)({onSwipedLeft:()=>{o(),t()},onSwipedRight:()=>{o(),s.push("/auth/registros?edit=".concat(a.id))},trackTouch:!0,delta:40}),h=a.horaSaida?"".concat(a.horaEntrada," → ").concat(a.horaSaida):"".concat(a.horaEntrada," → …"),x={trabalho:"Trabalho",sobreaviso_acionado:"Sobreaviso acionado",sobreaviso_nao_acionado:"Sobreaviso n\xe3o acionado"}[a.tipo];return(0,r.jsxs)("div",{...u,className:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between text-sm text-gray-500",children:[(0,r.jsx)("span",{children:(0,d.Z)(new Date(a.data),"EEE, dd MMM")}),(0,r.jsxs)("div",{className:"flex gap-2 md:opacity-0 md:group-hover:opacity-100",children:[(0,r.jsx)(c,{className:"h-4 w-4 cursor-pointer",onClick:()=>s.push("/auth/registros?edit=".concat(a.id))}),(0,r.jsx)(m,{className:"h-4 w-4 cursor-pointer",onClick:t})]})]}),(0,r.jsx)("p",{className:"mt-2 text-lg font-medium text-gray-800",children:h}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:x}),a.observacoes&&(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:a.observacoes})]})}var h=t(130),x=t(29501),p=t(80845),f=t(75426),g=t(66629),b=t(61994);function v(e){var a;let{existing:t,onSuccess:s}=e,i=(0,o.F)(e=>e.addRegistro),l=(0,o.F)(e=>e.updateRegistro),{vibrateSuccess:c,vibrateError:m}=(0,n.$)(),{register:u,handleSubmit:h,formState:{errors:v,isSubmitting:w}}=(0,x.cI)({resolver:(0,p.F)(f.I_),defaultValues:t?{data:t.data,horaEntrada:t.horaEntrada,horaSaida:t.horaSaida,tipo:t.tipo,observacoes:null!==(a=t.observacoes)&&void 0!==a?a:""}:{data:(0,d.Z)(new Date,"yyyy-MM-dd"),horaEntrada:"",horaSaida:"",tipo:"trabalho",observacoes:""}});return(0,r.jsxs)("form",{onSubmit:h(e=>{t&&t.id?l(t.id,{data:e.data,horaEntrada:e.horaEntrada,horaSaida:e.horaSaida,tipo:e.tipo,observacoes:e.observacoes,updatedAt:new Date().toISOString()}):i({id:(0,g.x0)(),usuarioId:"me",equipeId:"default",data:e.data,horaEntrada:e.horaEntrada,horaSaida:e.horaSaida,tipo:e.tipo,observacoes:e.observacoes,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isDeleted:!1}),c(),null==s||s()},()=>{m()}),className:"space-y-4 p-4 max-w-md mx-auto",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Data"}),(0,r.jsx)("input",{type:"date",...u("data"),className:"mt-1 w-full rounded border p-2"}),v.data&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:v.data.message})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Entrada"}),(0,r.jsx)("input",{type:"time",...u("horaEntrada"),className:"mt-1 w-full rounded border p-2"}),v.horaEntrada&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:v.horaEntrada.message})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Sa\xedda"}),(0,r.jsx)("input",{type:"time",...u("horaSaida"),className:"mt-1 w-full rounded border p-2"}),v.horaSaida&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:v.horaSaida.message})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Tipo"}),(0,r.jsxs)("select",{...u("tipo"),className:"mt-1 w-full rounded border p-2",children:[(0,r.jsx)("option",{value:"trabalho",children:"Trabalho"}),(0,r.jsx)("option",{value:"sobreaviso_acionado",children:"Sobreaviso acionado"}),(0,r.jsx)("option",{value:"sobreaviso_nao_acionado",children:"Sobreaviso n\xe3o acionado"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Observa\xe7\xf5es"}),(0,r.jsx)("textarea",{...u("observacoes"),className:"mt-1 w-full rounded border p-2",rows:3}),v.observacoes&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:v.observacoes.message})]}),(0,r.jsx)("button",{type:"submit",disabled:w,className:(0,b.Z)("w-full rounded py-2 font-semibold text-white",w?"bg-gray-400":"bg-primary-500"),children:w?"Salvando...":"Salvar registro"})]})}var w=t(54887);function j(){let{registros:e,deleteRegistro:a}=(0,o.F)(),t=(0,l.useSearchParams)(),[i,n]=(0,s.useState)(null);(0,s.useEffect)(()=>{let a=t.get("edit");a?n(e.find(e=>e.id===a)||null):n(null)},[t,e]);let d=e=>{a(e)},c=[...e].sort((e,a)=>e.data<a.data?1:-1);return(0,r.jsxs)("section",{className:"min-h-[calc(100vh-4rem)] p-4 md:p-6 bg-gray-50",children:[(0,r.jsx)(h.default,{title:"Registros"}),0===c.length?(0,r.jsx)("p",{className:"text-gray-600",children:"Sem registros."}):(0,r.jsx)("div",{className:"space-y-4",children:c.map(e=>(0,r.jsx)(u,{registro:e,onDelete:()=>d(e.id)},e.id))}),i&&(0,w.createPortal)((0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:(0,r.jsx)("div",{className:"w-full max-w-md rounded-lg bg-white shadow-lg",children:(0,r.jsx)(v,{existing:i,onSuccess:()=>{let e=new URL(window.location.href);e.searchParams.delete("edit"),window.history.replaceState(null,"",e.toString())}})})}),document.body)]})}},130:function(e,a,t){"use strict";t.d(a,{default:function(){return d}});var r=t(57437),s=t(2265),o=t(27648);let i=s.forwardRef(function(e,a){let{title:t,titleId:r,...o}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},o),t?s.createElement("title",{id:r},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))});var n=t(99376);function d(e){let{title:a,children:t}=e,d=(0,n.usePathname)().split("/").filter(Boolean);return(0,r.jsxs)("header",{className:"mb-4 hidden items-center justify-between md:flex",children:[(0,r.jsxs)("nav",{className:"flex items-center text-sm text-gray-500",children:[(0,r.jsx)(o.default,{href:"/auth/dashboard",className:"hover:text-primary-600",children:"Home"}),d.slice(1).map((e,a)=>(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)(i,{className:"mx-1 h-4 w-4"}),(0,r.jsx)("span",{className:"capitalize",children:e})]},a))]}),a&&(0,r.jsx)("h1",{className:"text-lg font-semibold text-gray-800",children:a}),t]})}},55428:function(e,a,t){"use strict";function r(){function e(e){var a;let t=navigator;null===(a=t.vibrate)||void 0===a||a.call(t,e)}return{vibrateSuccess:()=>e(30),vibrateError:()=>e([20,30,20])}}t.d(a,{$:function(){return r}})},46410:function(e,a,t){"use strict";let r;t.d(a,{I:function(){return d},db:function(){return l}});var s,o=t(738),i=t(43301),n=t(5978);r=null!==(s=window._firebaseApp)&&void 0!==s?s:(0,o.ZF)({apiKey:"AIzaSyAxDEIXRouCF63f9GK-ShqzTaKQhQIjvyw",authDomain:"controle-horarios-medicos.firebaseapp.com",projectId:"controle-horarios-medicos",storageBucket:"controle-horarios-medicos.firebasestorage.app",messagingSenderId:"977729325505",appId:"1:977729325505:web:82fe901b78d874ef81c740",measurementId:"YOUR_MEASUREMENT_ID"}),window._firebaseApp=r;let d=(0,i.v0)(r),l=(0,n.ad)(r)},75426:function(e,a,t){"use strict";t.d(a,{I_:function(){return i},Tu:function(){return o},pj:function(){return s}});var r=t(91115);let s=r.z.object({email:r.z.string().email({message:"Email inv\xe1lido"}),password:r.z.string().min(6,{message:"M\xednimo 6 caracteres"})}),o=s.extend({confirmPassword:r.z.string()}).refine(e=>e.password===e.confirmPassword,{message:"As senhas n\xe3o coincidem",path:["confirmPassword"]}),i=r.z.object({data:r.z.string().regex(/^\d{4}-\d{2}-\d{2}$/,{message:"Data deve estar no formato YYYY-MM-DD"}),horaEntrada:r.z.string().regex(/^([01]?\d|2[0-3]):[0-5]\d$/,{message:"Hora inv\xe1lida"}),horaSaida:r.z.string().regex(/^([01]?\d|2[0-3]):[0-5]\d$/,{message:"Hora inv\xe1lida"}),tipo:r.z.enum(["trabalho","sobreaviso_acionado","sobreaviso_nao_acionado"]),observacoes:r.z.string().max(500).optional()}).refine(e=>{let[a,t]=e.horaEntrada.split(":").map(Number),[r,s]=e.horaSaida.split(":").map(Number),o=60*a+t,i=60*r+s;return i<o&&(i+=1440),i>o},{message:"Hora de sa\xedda n\xe3o pode ser anterior \xe0 entrada",path:["horaSaida"]})},77280:function(e,a,t){"use strict";t.d(a,{F:function(){return n}});var r=t(3011),s=t(89134),o=t(46410),i=t(5978);let n=(0,r.U)()((0,s.tJ)(e=>({registros:[],addRegistro:async a=>{e(e=>({registros:[...e.registros,a]}));try{await (0,i.pl)((0,i.JU)(o.db,"registros",a.id),a)}catch(e){console.error("Erro ao salvar no Firestore",e)}},updateRegistro:async(a,t)=>{e(e=>({registros:e.registros.map(e=>e.id===a?{...e,...t}:e)}));try{await (0,i.r7)((0,i.JU)(o.db,"registros",a),t)}catch(e){console.error("Erro ao atualizar no Firestore",e)}},deleteRegistro:async a=>{e(e=>({registros:e.registros.filter(e=>e.id!==a)}));try{await (0,i.oe)((0,i.JU)(o.db,"registros",a))}catch(e){console.error("Erro ao deletar no Firestore",e)}},setRegistros:a=>e({registros:a})}),{name:"registro-store"}))}},function(e){e.O(0,[358,237,996,553,648,544,754,349,971,117,744],function(){return e(e.s=7122)}),_N_E=e.O()}]);