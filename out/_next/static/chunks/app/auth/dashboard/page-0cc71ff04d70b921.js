(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[20],{22276:function(e,a,t){Promise.resolve().then(t.bind(t,3398))},3398:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return $}});var r=t(57437),i=t(2265),o=t(77280),s=t(24738),n=t(16394);let d=e=>{let{title:a,value:t,highlight:i=!1}=e;return(0,r.jsxs)("div",{className:"rounded-lg p-4 shadow-sm border bg-white "+(i?"border-primary-500":"border-gray-200"),children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:a}),(0,r.jsx)("p",{className:"mt-2 text-2xl font-semibold text-gray-800",children:t})]})};function l(e){let{summary:a,highlightTrabalho:t=!1}=e,{totalHorasTrabalho:i,metaHoras:o,sobreavisoHoras:s}=a;return(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[(0,r.jsx)(d,{title:"Horas Trabalhadas (m\xeas)",value:i.toFixed(1),highlight:t}),(0,r.jsx)(d,{title:"Meta Mensal",value:o.toString(),highlight:!0}),(0,r.jsx)(d,{title:"Horas Sobreaviso",value:s.toFixed(1)})]})}var c=t(9075),u=t(61994),m=t(27072),g=t(55428),b=t(47842),f=t(28849),p=t(20322),v=t(16503),h=t(68690);function x(e){let{status:a,currentRegistro:t,onEntrar:i,onSobreaviso:o,onSair:s,onAcionarSobreaviso:n,onEncerrarSobreaviso:d,disabled:l,pulse:x=!1}=e,y="trabalhando"===a,w="sobreaviso_nao_acionado"===a||"sobreaviso_acionado"===a,{vibrateSuccess:j}=(0,g.$)(),I=(0,m.QS)({onSwipedLeft:()=>{(y||w)&&!l&&(j(),s())},onSwipedRight:()=>{y||w||l||(j(),i())},trackTouch:!0,delta:40});return w?(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex gap-3",...I,children:["sobreaviso_nao_acionado"===a?(0,r.jsxs)(c.E.button,{whileTap:{scale:.9},onClick:()=>{window.confirm("Marcar sobreaviso como acionado? Isso registrar\xe1 o hor\xe1rio de acionamento.")&&(j(),null==n||n())},disabled:l,className:(0,u.Z)("flex flex-1 items-center justify-center gap-2 rounded-lg p-4 font-semibold text-white shadow-lg",l?"bg-gray-400":"animate-pulse bg-orange-500 hover:bg-orange-600"),children:[(0,r.jsx)(b.Z,{className:"size-6"}),"Marcar como Acionado"]}):(0,r.jsxs)("div",{className:"flex flex-1 items-center justify-center gap-2 rounded-lg border-2 border-orange-300 bg-orange-100 p-4",children:[(0,r.jsx)(b.Z,{className:"size-6 text-orange-600"}),(0,r.jsx)("span",{className:"font-semibold text-orange-800",children:"Sobreaviso Acionado"})]}),(0,r.jsxs)(c.E.button,{whileTap:{scale:.9},onClick:()=>{window.confirm("Encerrar sobreaviso antes do hor\xe1rio programado?")&&(j(),null==d||d())},disabled:l,className:(0,u.Z)("flex flex-1 items-center justify-center gap-2 rounded-lg p-4 font-semibold text-white shadow-lg",l?"bg-gray-400":"bg-red-500 hover:bg-red-600"),children:[(0,r.jsx)(f.Z,{className:"size-6"}),"Encerrar"]})]}),(null==t?void 0:t.sobreavisoFim)&&(0,r.jsxs)("div",{className:"rounded-lg bg-purple-50 p-2 text-center text-sm text-gray-600",children:[(0,r.jsx)(p.Z,{className:"mr-1 inline size-4"}),"Programado at\xe9: ",t.sobreavisoFim]})]}):(0,r.jsxs)("div",{className:"flex gap-3",...I,children:[(0,r.jsxs)(c.E.button,{whileTap:{scale:.9},onClick:()=>{j(),i()},disabled:y||w||l,className:(0,u.Z)("flex flex-1 items-center justify-center gap-2 rounded-lg p-4 font-semibold text-white shadow-lg",y||w||l?"bg-gray-400":"bg-green-500 hover:bg-green-600",!x||y||w?"":"animate-pulse"),children:[(0,r.jsx)(v.Z,{className:"size-6"}),"Entrar"]}),(0,r.jsxs)(c.E.button,{whileTap:{scale:.9},onClick:()=>{j(),s()},disabled:!y||l,className:(0,u.Z)("flex flex-1 items-center justify-center gap-2 rounded-lg p-4 font-semibold text-white shadow-lg",!y||l?"bg-gray-400":"animate-pulse bg-red-500 hover:bg-red-600"),children:[(0,r.jsx)(f.Z,{className:"size-6"}),"Sair"]}),(0,r.jsxs)(c.E.button,{whileTap:{scale:.9},onClick:()=>{j(),o()},disabled:y||w||l,className:(0,u.Z)("flex flex-1 items-center justify-center gap-2 rounded-lg p-4 font-semibold text-white shadow-lg",y||w||l?"bg-gray-400":"bg-purple-500 hover:bg-purple-600"),children:[(0,r.jsx)(h.Z,{className:"size-6"}),"Sobreaviso"]})]})}var y=t(62891),w=t(89934),j=t(30702),I=t(73747),N=t(73247),S=t(93448);function D(e){let{registro:a}=e,[t,o]=(0,i.useState)(()=>{let e=new Date;return(0,y.Z)(e,new Date("".concat(a.data,"T").concat(a.horaEntrada,":00")))});(0,i.useEffect)(()=>{let e=setInterval(()=>{o(e=>e+1)},1e3);return()=>clearInterval(e)},[]);let s="sobreaviso_nao_acionado"===a.tipo||"sobreaviso_acionado"===a.tipo,n=(()=>{if(s){let e="sobreaviso_acionado"===a.tipo,t=e?"bg-orange-500":"bg-purple-600",r=null;if(a.sobreavisoInicio&&a.sobreavisoFim){let e=new Date,i=(0,w.Z)(a.sobreavisoInicio,"yyyy-MM-dd HH:mm",new Date),o=(0,w.Z)(a.sobreavisoFim,"yyyy-MM-dd HH:mm",new Date);if((0,j.Z)(e,{start:i,end:o})){let e=(0,I.Z)(o,"dd/MM '\xe0s' HH:mm",{locale:N.Z});r="Programado at\xe9 ".concat(e)}else r="Per\xedodo programado expirado",t="bg-gray-500"}return{label:e?"Sobreaviso Acionado":"Sobreaviso",bg:t,details:r,pulse:e,isAcionado:e}}return{label:"Trabalhando…",bg:"bg-primary-600",details:null,pulse:!1,isAcionado:!1}})();return(0,r.jsx)("div",{className:(0,S.cn)("".concat(n.bg," mb-4 rounded-lg py-3 text-white transition-colors duration-300"),n.pulse&&"animate-pulse"),children:(0,r.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[n.isAcionado&&(0,r.jsx)(b.Z,{className:"mr-2 size-5"}),(0,r.jsxs)("span",{className:"mr-2",children:["⏱️ ","".concat(Math.floor(t/3600),"h ").concat(Math.floor(t%3600/60).toString().padStart(2,"0"),"m")]}),(0,r.jsx)("span",{className:"font-semibold",children:n.label})]}),n.details&&(0,r.jsx)("div",{className:"mt-1 text-sm opacity-90",children:n.details}),a.observacoes&&(0,r.jsxs)("div",{className:"mt-2 max-w-xs truncate text-sm opacity-80",children:["\uD83D\uDCAC ",a.observacoes]})]})})}var F=t(29501),Z=t(80845),E=t(91115),A=t(54887),_=t(12381),M=t(40279),H=t(75060),k=t(23675),C=t(32489),z=t(79664),T=t(39356);let q=E.z.object({dataInicio:E.z.string().regex(/^\d{4}-\d{2}-\d{2}$/,"Data inv\xe1lida"),horaInicio:E.z.string().regex(/^([01]?\d|2[0-3]):[0-5]\d$/,"Hora inv\xe1lida"),dataFim:E.z.string().regex(/^\d{4}-\d{2}-\d{2}$/,"Data inv\xe1lida"),horaFim:E.z.string().regex(/^([01]?\d|2[0-3]):[0-5]\d$/,"Hora inv\xe1lida"),observacoes:E.z.string().max(500).optional()}).refine(e=>{let a=(0,w.Z)("".concat(e.dataInicio," ").concat(e.horaInicio),"yyyy-MM-dd HH:mm",new Date),t=(0,w.Z)("".concat(e.dataFim," ").concat(e.horaFim),"yyyy-MM-dd HH:mm",new Date);return(0,z.Z)(t,a)},{message:"Data/hora de fim deve ser posterior ao in\xedcio",path:["dataFim"]});function O(e){let{isOpen:a,onClose:t,onConfirm:i}=e,o=new Date,s=(0,T.Z)(o,12),{register:n,handleSubmit:d,formState:{errors:l,isSubmitting:c},reset:u}=(0,F.cI)({resolver:(0,Z.F)(q),defaultValues:{dataInicio:(0,I.Z)(o,"yyyy-MM-dd"),horaInicio:(0,I.Z)(o,"HH:mm"),dataFim:(0,I.Z)(s,"yyyy-MM-dd"),horaFim:(0,I.Z)(s,"HH:mm"),observacoes:""}}),m=async e=>{i(e),u(),t()},g=()=>{u(),t()};return a?(0,A.createPortal)((0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:(0,r.jsxs)("div",{className:"w-full max-w-md rounded-lg bg-white shadow-xl",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between border-b bg-purple-50 p-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"\uD83D\uDEE1️ Configurar Sobreaviso"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Defina o per\xedodo de sobreaviso"})]}),(0,r.jsx)("button",{onClick:g,className:"rounded-full p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600",children:(0,r.jsx)(C.Z,{className:"size-5"})})]}),(0,r.jsxs)("form",{onSubmit:d(m),className:"space-y-4 p-4",children:[(0,r.jsx)("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-3",children:(0,r.jsxs)("p",{className:"text-sm text-blue-800",children:["\uD83D\uDCA1 O sobreaviso come\xe7ar\xe1 como ",(0,r.jsx)("strong",{children:"n\xe3o acionado"}),". Durante o per\xedodo, voc\xea poder\xe1 marcar como ",(0,r.jsx)("strong",{children:"acionado"})," se necess\xe1rio."]})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(H._,{htmlFor:"dataInicio",children:"Data In\xedcio"}),(0,r.jsx)(M.I,{id:"dataInicio",type:"date",...n("dataInicio"),min:(0,I.Z)(new Date,"yyyy-MM-dd")}),l.dataInicio&&(0,r.jsx)("p",{className:"text-destructive text-sm",children:l.dataInicio.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(H._,{htmlFor:"horaInicio",children:"Hora In\xedcio"}),(0,r.jsx)(M.I,{id:"horaInicio",type:"time",...n("horaInicio")}),l.horaInicio&&(0,r.jsx)("p",{className:"text-destructive text-sm",children:l.horaInicio.message})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(H._,{htmlFor:"dataFim",children:"Data Fim"}),(0,r.jsx)(M.I,{id:"dataFim",type:"date",...n("dataFim"),min:(0,I.Z)(new Date,"yyyy-MM-dd")}),l.dataFim&&(0,r.jsx)("p",{className:"text-destructive text-sm",children:l.dataFim.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(H._,{htmlFor:"horaFim",children:"Hora Fim"}),(0,r.jsx)(M.I,{id:"horaFim",type:"time",...n("horaFim")}),l.horaFim&&(0,r.jsx)("p",{className:"text-destructive text-sm",children:l.horaFim.message})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(H._,{htmlFor:"observacoes",children:"Observa\xe7\xf5es"}),(0,r.jsx)(k.g,{id:"observacoes",...n("observacoes"),placeholder:"Detalhes sobre o per\xedodo de sobreaviso...",rows:3}),l.observacoes&&(0,r.jsx)("p",{className:"text-destructive text-sm",children:l.observacoes.message})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2 border-t pt-4",children:[(0,r.jsx)(_.z,{type:"button",variant:"outline",onClick:g,children:"Cancelar"}),(0,r.jsx)(_.z,{type:"submit",disabled:c,className:"bg-purple-600 hover:bg-purple-700",children:c?"Iniciando...":"\uD83D\uDEE1️ Iniciar Sobreaviso"})]})]})]})}),document.body):null}var R=t(66629),U=t(30166),J=t(91051),P=t(84832),Q=t(31526);let K=(0,U.default)(()=>Promise.all([t.e(232),t.e(144)]).then(t.bind(t,12144)),{loadableGenerated:{webpack:()=>[12144]},ssr:!1,loading:()=>(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Carregando gr\xe1fico..."})});function $(){let{summary:e}=function(){let e=(0,o.F)(e=>e.registros),{summary:a,chartData:t}=(0,i.useMemo)(()=>{let a=new Date,t=0,r=0,i={};e.forEach(e=>{let o=new Date(e.data);if(!(0,n.Z)(o,a)||!e.horaSaida)return;let d=(0,s.PA)(e.horaEntrada,e.horaSaida),l=e.data;if(i[l]||(i[l]={trabalho:0,sobreaviso:0}),"trabalho"===e.tipo)t+=d,i[l].trabalho+=d;else{let a="sobreaviso_acionado"===e.tipo?1:.33;r+=d*a,i[l].sobreaviso+=d*a}});let o=Object.entries(i).sort((e,a)=>{let[t]=e,[r]=a;return t>r?1:-1}).map(e=>{let[a,{trabalho:t,sobreaviso:r}]=e;return{date:a,trabalho:t,sobreaviso:r}});return{summary:{totalHorasTrabalho:t,metaHoras:160,sobreavisoHoras:r},chartData:o}},[e]);return{summary:a,chartData:t}}(),[a,t]=(0,i.useState)(!1),[d,c]=(0,i.useState)(!1),{registros:u,addRegistro:m,updateRegistro:g}=(0,o.F)(),[b,f]=(0,i.useState)(!1),p=(0,J.Z)(e=>e.confirmEnd),{user:v}=(0,P.a)(),h=(0,Q.t)(),y=u.length>0?u[u.length-1]:null,N="livre";if(y&&!y.horaSaida){if("trabalho"===y.tipo)N="trabalhando";else if("sobreaviso_nao_acionado"===y.tipo||"sobreaviso_acionado"===y.tipo){if(y.sobreavisoInicio&&y.sobreavisoFim){let e=new Date,a=(0,w.Z)(y.sobreavisoInicio,"yyyy-MM-dd HH:mm",new Date),t=(0,w.Z)(y.sobreavisoFim,"yyyy-MM-dd HH:mm",new Date);(0,j.Z)(e,{start:a,end:t})?N=y.tipo:(g(y.id,{horaSaida:(0,I.Z)(t,"HH:mm"),sobreavisoAtivo:!1,updatedAt:new Date().toISOString()}),N="livre")}else N=y.tipo}}return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Dashboard"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Seu painel de controle r\xe1pido. Inicie, pause e gerencie seus registros com um toque."})]}),"livre"!==N&&y&&(0,r.jsx)(D,{registro:y}),(0,r.jsx)(x,{status:N,currentRegistro:y,onEntrar:()=>{var e,a,r;let i=new Date;m({id:(0,R.x0)(),usuarioId:null!==(e=null==v?void 0:v.uid)&&void 0!==e?e:"local",equipeId:null!==(r=null!==(a=null==h?void 0:h.id)&&void 0!==a?a:localStorage.getItem("equipeId"))&&void 0!==r?r:"",data:(0,I.Z)(i,"yyyy-MM-dd"),horaEntrada:(0,I.Z)(i,"HH:mm"),horaSaida:"",tipo:"trabalho"}),f(!0),t(!0),setTimeout(()=>f(!1),700),setTimeout(()=>t(!1),2e3)},onSobreaviso:()=>{c(!0)},onSair:()=>{y&&!y.horaSaida&&(!p||window.confirm("Encerrar registro iniciado \xe0s "+y.horaEntrada+"?"))&&(g(y.id,{horaSaida:(0,I.Z)(new Date,"HH:mm"),updatedAt:new Date().toISOString()}),t(!0),setTimeout(()=>t(!1),2e3))},onAcionarSobreaviso:()=>{(null==y?void 0:y.id)&&g(y.id,{tipo:"sobreaviso_acionado",updatedAt:new Date().toISOString()})},onEncerrarSobreaviso:()=>{(null==y?void 0:y.id)&&g(y.id,{horaSaida:(0,I.Z)(new Date,"HH:mm"),sobreavisoAtivo:!1,updatedAt:new Date().toISOString()})},pulse:b}),(0,r.jsx)(l,{summary:e,highlightTrabalho:a}),(0,r.jsx)(K,{}),(0,r.jsx)(O,{isOpen:d,onClose:()=>c(!1),onConfirm:e=>{var a,t,r;let i="".concat(e.dataInicio," ").concat(e.horaInicio),o="".concat(e.dataFim," ").concat(e.horaFim);m({id:(0,R.x0)(),usuarioId:null!==(a=null==v?void 0:v.uid)&&void 0!==a?a:"local",equipeId:null!==(r=null!==(t=null==h?void 0:h.id)&&void 0!==t?t:localStorage.getItem("equipeId"))&&void 0!==r?r:"",data:e.dataInicio,horaEntrada:e.horaInicio,horaSaida:"",tipo:"sobreaviso_nao_acionado",observacoes:e.observacoes,sobreavisoInicio:i,sobreavisoFim:o,sobreavisoAtivo:!0})}})]})}},12381:function(e,a,t){"use strict";t.d(a,{z:function(){return l}});var r=t(57437),i=t(2265),o=t(37053),s=t(90535),n=t(93448);let d=(0,s.j)("ring-offset-background focus-visible:ring-ring inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border-input bg-background hover:bg-accent hover:text-accent-foreground border",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"size-10"}},defaultVariants:{variant:"default",size:"default"}}),l=i.forwardRef((e,a)=>{let{className:t,variant:i,size:s,asChild:l=!1,...c}=e,u=l?o.g7:"button";return(0,r.jsx)(u,{className:(0,n.cn)(d({variant:i,size:s,className:t})),ref:a,...c})});l.displayName="Button"},40279:function(e,a,t){"use strict";t.d(a,{I:function(){return s}});var r=t(57437),i=t(2265),o=t(93448);let s=i.forwardRef((e,a)=>{let{className:t,type:i,...s}=e;return(0,r.jsx)("input",{type:i,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...s})});s.displayName="Input"},75060:function(e,a,t){"use strict";t.d(a,{_:function(){return l}});var r=t(57437),i=t(2265),o=t(6394),s=t(90535),n=t(93448);let d=(0,s.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,r.jsx)(o.f,{ref:a,className:(0,n.cn)(d(),t),...i})});l.displayName=o.f.displayName},23675:function(e,a,t){"use strict";t.d(a,{g:function(){return s}});var r=t(57437),i=t(2265),o=t(93448);let s=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,r.jsx)("textarea",{className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...i})});s.displayName="Textarea"},84832:function(e,a,t){"use strict";t.d(a,{a:function(){return m}});var r=t(2265),i=t(46410),o=t(43301),s=t(64131),n=t(738),d=t(76834);function l(e,a){let t=function(){try{let e=(0,n.C6)().length>0?(0,n.C6)()[0]:(0,n.ZF)({apiKey:"AIzaSyAxDEIXRouCF63f9GK-ShqzTaKQhQIjvyw",authDomain:"controle-horarios-medicos.firebaseapp.com",projectId:"controle-horarios-medicos",storageBucket:"controle-horarios-medicos.firebasestorage.app",messagingSenderId:"977729325505",appId:"1:977729325505:web:82fe901b78d874ef81c740",measurementId:"YOUR_MEASUREMENT_ID"});return d.getAnalytics(e)}catch(e){return console.warn("Analytics init falhou",e),null}}();t&&d.logEvent(t,e,a)}var c=t(5978),u=t(1186);function m(){let[e,a]=(0,r.useState)(null),[t,n]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=(0,o.Aj)(i.I,async e=>{if(a(e),e){var t,r,o;let a=await e.getIdToken();s.Z.set("auth-token",a,{expires:1}),localStorage.setItem("user",JSON.stringify({uid:e.uid,email:e.email}));let n=(0,c.JU)(i.db,"users",e.uid);(await (0,c.QT)(n)).exists()||await (0,c.pl)(n,{email:e.email,nome:null!==(r=e.displayName)&&void 0!==r?r:"",role:"medico",createdAt:Date.now(),updatedAt:Date.now(),isActive:!0});let d=(await (0,c.QT)(n)).data();d&&!d.equipeId&&e.email&&await (0,u.Ol)(e.uid,e.email);let l=null!==(o=null===(t=(await (0,c.QT)(n)).data())||void 0===t?void 0:t.equipeId)&&void 0!==o?o:"";localStorage.setItem("equipeId",l)}else s.Z.remove("auth-token"),localStorage.removeItem("user");n(!1)}),t=(0,o.MX)(i.I,async e=>{if(e){let a=await e.getIdToken();s.Z.set("auth-token",a,{expires:1})}});return()=>{e(),t()}},[]);let d=(0,r.useCallback)(async(e,a)=>{await (0,o.e5)(i.I,e,a),l("login_success")},[]);return{user:e,loading:t,login:d,register:(0,r.useCallback)(async(e,a)=>{let t=await (0,o.Xb)(i.I,e,a);await (0,c.pl)((0,c.JU)(i.db,"users",t.user.uid),{email:e,nome:"",role:"medico",createdAt:Date.now(),updatedAt:Date.now(),isActive:!0}),l("register_success")},[]),logout:(0,r.useCallback)(async()=>{await (0,o.w7)(i.I),l("logout")},[]),resetPassword:(0,r.useCallback)(async e=>{await (0,o.LS)(i.I,e)},[])}}},55428:function(e,a,t){"use strict";t.d(a,{$:function(){return i}});var r=t(91051);function i(){let e=(0,r.Z)(e=>e.vibration);function a(a){var t;let r=navigator;e&&(null===(t=r.vibrate)||void 0===t||t.call(r,a))}return{vibrateSuccess:()=>a(30),vibrateError:()=>a([20,30,20])}}},31526:function(e,a,t){"use strict";t.d(a,{t:function(){return n}});var r=t(2265),i=t(5978),o=t(84832),s=t(46410);function n(){let{user:e}=(0,o.a)(),[a,t]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(!e)return;let a=null,r=(0,i.cf)((0,i.JU)(s.db,"users",e.uid),e=>{let r=e.data(),o=null==r?void 0:r.equipeId;o?(localStorage.setItem("equipeId",o),a&&a(),a=(0,i.cf)((0,i.JU)(s.db,"equipes",o),e=>{t(e.exists()?e.data():null)})):(a&&(a(),a=null),t(null))});return()=>{r(),a&&a()}},[e]),a}},24738:function(e,a,t){"use strict";function r(e){let[a,t]=e.split(":").map(Number);return 60*a+t}function i(e,a){let t=r(e),i=r(a);return i<t&&(i+=1440),(i-t)/60}t.d(a,{PA:function(){return i}})},46410:function(e,a,t){"use strict";let r;t.d(a,{I:function(){return d},db:function(){return l}});var i,o=t(738),s=t(43301),n=t(5978);r=null!==(i=window._firebaseApp)&&void 0!==i?i:(0,o.ZF)({apiKey:"AIzaSyAxDEIXRouCF63f9GK-ShqzTaKQhQIjvyw",authDomain:"controle-horarios-medicos.firebaseapp.com",projectId:"controle-horarios-medicos",storageBucket:"controle-horarios-medicos.firebasestorage.app",messagingSenderId:"977729325505",appId:"1:977729325505:web:82fe901b78d874ef81c740",measurementId:"YOUR_MEASUREMENT_ID"}),window._firebaseApp=r;let d=(0,s.v0)(r),l=(0,n.ad)(r);try{(0,n.ST)(l)}catch(e){e instanceof o.ZR&&("failed-precondition"===e.code?console.warn("A persist\xeancia do Firestore falhou. Isso geralmente ocorre se voc\xea tiver v\xe1rias abas abertas. Os dados n\xe3o ser\xe3o salvos offline nesta aba."):"unimplemented"===e.code&&console.warn("O navegador atual n\xe3o suporta persist\xeancia offline do Firestore."))}},1186:function(e,a,t){"use strict";t.d(a,{Cm:function(){return s},Lq:function(){return n},Ol:function(){return d}});var r=t(46410),i=t(66629),o=t(5978);async function s(e,a,t){let i=(0,o.JU)((0,o.hJ)(r.db,"equipes")),s={id:i.id,nome:a,adminId:e,membros:[e],invites:[],timezone:t,createdAt:Date.now(),isActive:!0};return await (0,o.pl)(i,s),await (0,o.r7)((0,o.JU)(r.db,"users",e),{equipeId:i.id,role:"admin_equipe",updatedAt:(0,o.Bt)()}),i.id}async function n(e,a){let t=(0,i.x0)(8);return await (0,o.r7)((0,o.JU)(r.db,"equipes",e),{invites:(0,o.vr)({email:a,code:t,status:"pending"})}),t}async function d(e,a){let t=(0,o.IO)((0,o.hJ)(r.db,"equipes"),(0,o.ar)("invites","array-contains",{code:a,status:"pending"})),i=await (0,o.PL)(t);if(i.empty)return console.error("Nenhum convite encontrado com o c\xf3digo:",a),!1;let s=i.docs[0],n=s.id,d=s.data().invites.map(e=>e.code===a?{...e,status:"accepted"}:e);return await (0,o.r7)(s.ref,{membros:(0,o.vr)(e),invites:d}),await (0,o.r7)((0,o.JU)(r.db,"users",e),{equipeId:n,role:"medico",updatedAt:(0,o.Bt)()}),!0}},93448:function(e,a,t){"use strict";t.d(a,{cn:function(){return o}});var r=t(61994),i=t(53335);function o(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,i.m6)((0,r.W)(a))}},77280:function(e,a,t){"use strict";t.d(a,{F:function(){return n}});var r=t(3011),i=t(89134),o=t(46410),s=t(5978);let n=(0,r.U)()((0,i.tJ)(e=>({registros:[],addRegistro:async a=>{e(e=>({registros:[...e.registros,a]}));try{await (0,s.pl)((0,s.JU)(o.db,"registros",a.id),a)}catch(t){throw console.error("Erro ao salvar no Firestore",t),e(e=>({registros:e.registros.filter(e=>e.id!==a.id)})),t}},updateRegistro:async(a,t)=>{e(e=>({registros:e.registros.map(e=>e.id===a?{...e,...t}:e)}));try{await (0,s.r7)((0,s.JU)(o.db,"registros",a),t)}catch(e){console.error("Erro ao atualizar no Firestore",e)}},deleteRegistro:async a=>{e(e=>({registros:e.registros.filter(e=>e.id!==a)}));try{await (0,s.oe)((0,s.JU)(o.db,"registros",a))}catch(e){console.error("Erro ao deletar no Firestore",e)}},setRegistros:a=>e({registros:a})}),{name:"registro-store"}))},91051:function(e,a,t){"use strict";t.d(a,{Z:function(){return o}});var r=t(3011),i=t(89134);let o=(0,r.U)()((0,i.tJ)((e,a)=>({vibration:!0,sound:!0,confetti:!0,confirmEnd:!0,toggleVibration:()=>e({vibration:!a().vibration}),toggleSound:()=>e({sound:!a().sound}),toggleConfetti:()=>e({confetti:!a().confetti}),toggleConfirmEnd:()=>e({confirmEnd:!a().confirmEnd})}),{name:"ui-prefs"}))}},function(e){e.O(0,[358,237,188,909,137,544,127,636,971,117,744],function(){return e(e.s=22276)}),_N_E=e.O()}]);