(()=>{var e={};e.id=579,e.ids=[579],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4770:e=>{"use strict";e.exports=require("crypto")},665:e=>{"use strict";e.exports=require("dns")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},5816:e=>{"use strict";e.exports=require("process")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},6005:e=>{"use strict";e.exports=require("node:crypto")},6306:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>l}),r(711),r(2486),r(1674),r(5866);var s=r(3191),t=r(8716),o=r(7922),i=r.n(o),n=r(5231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);r.d(a,d);let l=["",{children:["auth",{children:["registros",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,711)),"/Users/paulootsubo/Documents/Documentos - PRAVALER-288/workspace-cursor/controle-horarios-medicos/src/app/auth/registros/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2486)),"/Users/paulootsubo/Documents/Documentos - PRAVALER-288/workspace-cursor/controle-horarios-medicos/src/app/auth/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,1674)),"/Users/paulootsubo/Documents/Documentos - PRAVALER-288/workspace-cursor/controle-horarios-medicos/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/paulootsubo/Documents/Documentos - PRAVALER-288/workspace-cursor/controle-horarios-medicos/src/app/auth/registros/page.tsx"],u="/auth/registros/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/auth/registros/page",pathname:"/auth/registros",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},2281:(e,a,r)=>{Promise.resolve().then(r.bind(r,6751))},6751:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>w});var s=r(326),t=r(7577),o=r(2351),i=r(1856),n=r(4802),d=r(5612),l=r(5047);let c=t.forwardRef(function({title:e,titleId:a,...r},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},r),e?t.createElement("title",{id:a},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}),u=t.forwardRef(function({title:e,titleId:a,...r},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},r),e?t.createElement("title",{id:a},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});function m({registro:e,onDelete:a}){let r=(0,l.useRouter)(),{vibrateSuccess:t}=(0,n.$)(),o=(0,i.QS)({onSwipedLeft:()=>{t(),a()},onSwipedRight:()=>{t(),r.push(`/auth/registros?edit=${e.id}`)},trackTouch:!0,delta:40}),m=e.horaSaida?`${e.horaEntrada} → ${e.horaSaida}`:`${e.horaEntrada} → …`,p={trabalho:"Trabalho",sobreaviso_acionado:"Sobreaviso acionado",sobreaviso_nao_acionado:"Sobreaviso n\xe3o acionado"}[e.tipo];return(0,s.jsxs)("div",{...o,className:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between text-sm text-gray-500",children:[s.jsx("span",{children:(0,d.Z)(new Date(e.data),"EEE, dd MMM")}),(0,s.jsxs)("div",{className:"flex gap-2 md:opacity-0 md:group-hover:opacity-100",children:[s.jsx(c,{className:"h-4 w-4 cursor-pointer",onClick:()=>r.push(`/auth/registros?edit=${e.id}`)}),s.jsx(u,{className:"h-4 w-4 cursor-pointer",onClick:a})]})]}),s.jsx("p",{className:"mt-2 text-lg font-medium text-gray-800",children:m}),s.jsx("p",{className:"text-sm text-gray-600",children:p}),e.observacoes&&s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:e.observacoes})]})}var p=r(2491),h=r(4723),x=r(987),g=r(9864),b=r(7115),v=r(1135);function f({existing:e,onSuccess:a}){let r=(0,o.F)(e=>e.addRegistro),t=(0,o.F)(e=>e.updateRegistro),{vibrateSuccess:i,vibrateError:l}=(0,n.$)(),{register:c,handleSubmit:u,formState:{errors:m,isSubmitting:p}}=(0,h.cI)({resolver:(0,x.F)(g.I_),defaultValues:e?{data:e.data,horaEntrada:e.horaEntrada,horaSaida:e.horaSaida,tipo:e.tipo,observacoes:e.observacoes??""}:{data:(0,d.Z)(new Date,"yyyy-MM-dd"),horaEntrada:"",horaSaida:"",tipo:"trabalho",observacoes:""}});return(0,s.jsxs)("form",{onSubmit:u(s=>{e&&e.id?t(e.id,{data:s.data,horaEntrada:s.horaEntrada,horaSaida:s.horaSaida,tipo:s.tipo,observacoes:s.observacoes,updatedAt:new Date().toISOString()}):r({id:(0,b.x0)(),usuarioId:"me",equipeId:"default",data:s.data,horaEntrada:s.horaEntrada,horaSaida:s.horaSaida,tipo:s.tipo,observacoes:s.observacoes,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isDeleted:!1}),i(),a?.()},()=>{l()}),className:"space-y-4 p-4 max-w-md mx-auto",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Data"}),s.jsx("input",{type:"date",...c("data"),className:"mt-1 w-full rounded border p-2"}),m.data&&s.jsx("p",{className:"text-sm text-red-600",children:m.data.message})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium",children:"Entrada"}),s.jsx("input",{type:"time",...c("horaEntrada"),className:"mt-1 w-full rounded border p-2"}),m.horaEntrada&&s.jsx("p",{className:"text-sm text-red-600",children:m.horaEntrada.message})]}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium",children:"Sa\xedda"}),s.jsx("input",{type:"time",...c("horaSaida"),className:"mt-1 w-full rounded border p-2"}),m.horaSaida&&s.jsx("p",{className:"text-sm text-red-600",children:m.horaSaida.message})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Tipo"}),(0,s.jsxs)("select",{...c("tipo"),className:"mt-1 w-full rounded border p-2",children:[s.jsx("option",{value:"trabalho",children:"Trabalho"}),s.jsx("option",{value:"sobreaviso_acionado",children:"Sobreaviso acionado"}),s.jsx("option",{value:"sobreaviso_nao_acionado",children:"Sobreaviso n\xe3o acionado"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Observa\xe7\xf5es"}),s.jsx("textarea",{...c("observacoes"),className:"mt-1 w-full rounded border p-2",rows:3}),m.observacoes&&s.jsx("p",{className:"text-sm text-red-600",children:m.observacoes.message})]}),s.jsx("button",{type:"submit",disabled:p,className:(0,v.Z)("w-full rounded py-2 font-semibold text-white",p?"bg-gray-400":"bg-primary-500"),children:p?"Salvando...":"Salvar registro"})]})}var j=r(962);function w(){let{registros:e,deleteRegistro:a}=(0,o.F)();(0,l.useSearchParams)();let[r,i]=(0,t.useState)(null),n=e=>{a(e)},d=[...e].sort((e,a)=>e.data<a.data?1:-1);return(0,s.jsxs)("section",{className:"min-h-[calc(100vh-4rem)] p-4 md:p-6 bg-gray-50",children:[s.jsx(p.default,{title:"Registros"}),0===d.length?s.jsx("p",{className:"text-gray-600",children:"Sem registros."}):s.jsx("div",{className:"space-y-4",children:d.map(e=>s.jsx(m,{registro:e,onDelete:()=>n(e.id)},e.id))}),r&&(0,j.createPortal)(s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:s.jsx("div",{className:"w-full max-w-md rounded-lg bg-white shadow-lg",children:s.jsx(f,{existing:r,onSuccess:()=>{let e=new URL(window.location.href);e.searchParams.delete("edit"),window.history.replaceState(null,"",e.toString())}})})}),document.body)]})}},9864:(e,a,r)=>{"use strict";r.d(a,{I_:()=>i,Tu:()=>o,pj:()=>t});var s=r(2576);let t=s.z.object({email:s.z.string().email({message:"Email inv\xe1lido"}),password:s.z.string().min(6,{message:"M\xednimo 6 caracteres"})}),o=t.extend({confirmPassword:s.z.string()}).refine(e=>e.password===e.confirmPassword,{message:"As senhas n\xe3o coincidem",path:["confirmPassword"]}),i=s.z.object({data:s.z.string().regex(/^\d{4}-\d{2}-\d{2}$/,{message:"Data deve estar no formato YYYY-MM-DD"}),horaEntrada:s.z.string().regex(/^([01]?\d|2[0-3]):[0-5]\d$/,{message:"Hora inv\xe1lida"}),horaSaida:s.z.string().regex(/^([01]?\d|2[0-3]):[0-5]\d$/,{message:"Hora inv\xe1lida"}),tipo:s.z.enum(["trabalho","sobreaviso_acionado","sobreaviso_nao_acionado"]),observacoes:s.z.string().max(500).optional()}).refine(e=>{let[a,r]=e.horaEntrada.split(":").map(Number),[s,t]=e.horaSaida.split(":").map(Number),o=60*a+r,i=60*s+t;return i<o&&(i+=1440),i>o},{message:"Hora de sa\xedda n\xe3o pode ser anterior \xe0 entrada",path:["horaSaida"]})},711:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`/Users/paulootsubo/Documents/Documentos - PRAVALER-288/workspace-cursor/controle-horarios-medicos/src/app/auth/registros/page.tsx#default`)}};var a=require("../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),s=a.X(0,[276,849,37,490,992,612,882],()=>r(6306));module.exports=s})();