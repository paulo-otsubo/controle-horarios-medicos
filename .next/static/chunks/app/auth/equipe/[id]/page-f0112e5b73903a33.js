(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[244],{62998:function(e,t,s){Promise.resolve().then(s.bind(s,10205))},10205:function(e,t,s){"use strict";s.d(t,{default:function(){return u}});var r=s(57437),a=s(2265),n=s(99376),i=s(47656),o=s(65044),c=s(96840);function u(){let e=(0,n.useParams)(),t=null==e?void 0:e.id,{equipes:s,updateEquipe:u}=(0,i.R)(e=>({equipes:e.equipes,updateEquipe:e.updateEquipe})),l=(0,n.useRouter)(),d=(0,a.useMemo)(()=>s.find(e=>e.id===t),[s,t]);return d?(0,r.jsx)(c.Z,{children:(0,r.jsxs)("div",{className:"max-w-xl mx-auto bg-white p-6 rounded-lg shadow-sm",children:[(0,r.jsx)("h2",{className:"mb-4 text-xl font-semibold",children:"Editar Equipe"}),(0,r.jsx)(o.Z,{initial:d,onSubmit:function(e){u(t,{nome:e.nome,descricao:e.descricao,updatedAt:new Date().toISOString()}),l.push("/auth/equipe")},onCancel:()=>l.back()})]})}):(0,r.jsx)("p",{className:"text-center p-4",children:"Equipe n\xe3o encontrada."})}},96840:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var r=s(57437),a=s(2265),n=s(84832),i=s(46410),o=s(43301),c=s(13491),u=s(99376);function l(e){let{children:t}=e,{role:s,loading:l}=function(){let{user:e}=(0,n.a)(),[t,s]=(0,a.useState)("member"),[r,u]=(0,a.useState)(!0);async function l(e){if(!e){s("member"),u(!1);return}s("admin"===(await e.getIdTokenResult(!0)).claims.role?"admin":"member"),u(!1)}return(0,a.useEffect)(()=>{l(e)},[e]),(0,a.useEffect)(()=>{let e=(0,o.MX)(i.I,e=>{l(e)});return()=>e()},[]),{role:t,setRole:(0,a.useCallback)(async t=>{if(!e)return;let s=(0,c.$C)(),r=(0,c.V1)(s,"setUserRole");await r({uid:e.uid,role:t}),await e.getIdToken(!0)},[e]),loading:r}}(),d=(0,u.useRouter)();return((0,a.useEffect)(()=>{l||"admin"===s||d.replace("/")},[l,s,d]),l)?(0,r.jsx)("p",{className:"p-4 text-center text-gray-600",children:"Verificando permiss\xf5es..."}):"admin"!==s?(0,r.jsx)("p",{className:"p-4 text-center text-gray-600",children:"Acesso restrito aos administradores..."}):(0,r.jsx)(r.Fragment,{children:t})}},65044:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var r=s(57437),a=s(2265),n=s(29501),i=s(91115),o=s(80845);let c=i.z.object({nome:i.z.string().min(2,"Informe um nome"),descricao:i.z.string().optional()});function u(e){let{initial:t,onSubmit:s,onCancel:i}=e,{register:u,handleSubmit:l,formState:{errors:d},reset:m}=(0,n.cI)({resolver:(0,o.F)(c),defaultValues:t});return(0,a.useEffect)(()=>{m(null!=t?t:{nome:"",descricao:""})},[t,m]),(0,r.jsxs)("form",{onSubmit:l(s),className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nome"}),(0,r.jsx)("input",{type:"text",...u("nome"),className:"mt-1 w-full rounded border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),d.nome&&(0,r.jsx)("p",{className:"text-sm text-error-500",children:d.nome.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Descri\xe7\xe3o"}),(0,r.jsx)("textarea",{rows:3,...u("descricao"),className:"mt-1 w-full rounded border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),d.descricao&&(0,r.jsx)("p",{className:"text-sm text-error-500",children:d.descricao.message})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[i&&(0,r.jsx)("button",{type:"button",onClick:i,className:"rounded bg-gray-200 px-4 py-2 text-gray-700 hover:bg-gray-300",children:"Cancelar"}),(0,r.jsx)("button",{type:"submit",className:"rounded bg-primary-500 px-4 py-2 text-white hover:bg-primary-600",children:"Salvar"})]})]})}},84832:function(e,t,s){"use strict";s.d(t,{a:function(){return l}});var r=s(2265),a=s(46410),n=s(43301),i=s(64131),o=s(738),c=s(82650);function u(e,t){let s=function(){try{let e=(0,o.C6)().length>0?(0,o.C6)()[0]:(0,o.ZF)({apiKey:"AIzaSyAxDEIXRouCF63f9GK-ShqzTaKQhQIjvyw",authDomain:"controle-horarios-medicos.firebaseapp.com",projectId:"controle-horarios-medicos",storageBucket:"controle-horarios-medicos.firebasestorage.app",messagingSenderId:"977729325505",appId:"1:977729325505:web:82fe901b78d874ef81c740",measurementId:"YOUR_MEASUREMENT_ID"});return c.getAnalytics(e)}catch(e){return console.warn("Analytics init falhou",e),null}}();s&&c.logEvent(s,e,t)}function l(){let[e,t]=(0,r.useState)(null),[s,o]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=(0,n.Aj)(a.I,async e=>{if(t(e),e){let t=await e.getIdToken();i.Z.set("auth-token",t,{expires:1}),localStorage.setItem("user",JSON.stringify({uid:e.uid,email:e.email}))}else i.Z.remove("auth-token"),localStorage.removeItem("user");o(!1)}),s=(0,n.MX)(a.I,async e=>{if(e){let t=await e.getIdToken();i.Z.set("auth-token",t,{expires:1})}});return()=>{e(),s()}},[]);let c=(0,r.useCallback)(async(e,t)=>{await (0,n.e5)(a.I,e,t),u("login_success")},[]);return{user:e,loading:s,login:c,register:(0,r.useCallback)(async(e,t)=>{await (0,n.Xb)(a.I,e,t),u("register_success")},[]),logout:(0,r.useCallback)(async()=>{await (0,n.w7)(a.I),u("logout")},[]),resetPassword:(0,r.useCallback)(async e=>{await (0,n.LS)(a.I,e)},[])}}},46410:function(e,t,s){"use strict";let r;s.d(t,{I:function(){return c},db:function(){return u}});var a,n=s(738),i=s(43301),o=s(5978);r=null!==(a=window._firebaseApp)&&void 0!==a?a:(0,n.ZF)({apiKey:"AIzaSyAxDEIXRouCF63f9GK-ShqzTaKQhQIjvyw",authDomain:"controle-horarios-medicos.firebaseapp.com",projectId:"controle-horarios-medicos",storageBucket:"controle-horarios-medicos.firebasestorage.app",messagingSenderId:"977729325505",appId:"1:977729325505:web:82fe901b78d874ef81c740",measurementId:"YOUR_MEASUREMENT_ID"}),window._firebaseApp=r;let c=(0,i.v0)(r),u=(0,o.ad)(r)},47656:function(e,t,s){"use strict";s.d(t,{R:function(){return n}});var r=s(3011),a=s(89134);let n=(0,r.U)()((0,a.tJ)(e=>({equipes:[],addEquipe:t=>e(e=>({equipes:[...e.equipes,t]})),updateEquipe:(t,s)=>e(e=>({equipes:e.equipes.map(e=>e.id===t?{...e,...s}:e)})),deleteEquipe:t=>e(e=>({equipes:e.equipes.filter(e=>e.id!==t)}))}),{name:"equipe-store"}))}},function(e){e.O(0,[358,237,996,553,990,162,544,491,971,117,744],function(){return e(e.s=62998)}),_N_E=e.O()}]);