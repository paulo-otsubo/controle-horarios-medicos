(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[116],{32576:function(e,t,r){Promise.resolve().then(r.bind(r,37037))},37037:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var s=r(57437),a=r(2265),i=r(96840),o=r(77280),n=r(47656),u=r(24738);function c(){let e=function(){let e=(0,o.F)(e=>e.registros),t=(0,n.R)(e=>e.equipes);return(0,a.useMemo)(()=>{let r=new Map;return e.forEach(e=>{var s,a,i;let o=null!==(i=r.get(e.equipeId))&&void 0!==i?i:{equipeId:e.equipeId,equipeNome:null!==(a=null===(s=t.find(t=>t.id===e.equipeId))||void 0===s?void 0:s.nome)&&void 0!==a?a:"Sem equipe",horasTrabalho:0,horasSobreaviso:0},n=(0,u.PA)(e.horaEntrada,e.horaSaida);"trabalho"===e.tipo?o.horasTrabalho+=n:o.horasSobreaviso+=n,r.set(e.equipeId,o)}),Array.from(r.values()).sort((e,t)=>e.equipeNome.localeCompare(t.equipeNome))},[e,t])}();return(0,s.jsx)(i.Z,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Relat\xf3rio Consolidado (m\xeas atual)"}),0===e.length?(0,s.jsx)("p",{className:"text-gray-600",children:"Sem registros."}):(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 bg-white shadow-sm rounded-lg",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Equipe"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Horas Trabalho"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Horas Sobreaviso"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200",children:e.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:e.equipeNome}),(0,s.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:e.horasTrabalho.toFixed(1)}),(0,s.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:e.horasSobreaviso.toFixed(1)})]},e.equipeId))})]})]})})}},96840:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var s=r(57437),a=r(2265),i=r(84832),o=r(46410),n=r(43301),u=r(13491),c=r(99376);function l(e){let{children:t}=e,{role:r,loading:l}=function(){let{user:e}=(0,i.a)(),[t,r]=(0,a.useState)("member"),[s,c]=(0,a.useState)(!0);async function l(e){if(!e){r("member"),c(!1);return}r("admin"===(await e.getIdTokenResult(!0)).claims.role?"admin":"member"),c(!1)}return(0,a.useEffect)(()=>{l(e)},[e]),(0,a.useEffect)(()=>{let e=(0,n.MX)(o.I,e=>{l(e)});return()=>e()},[]),{role:t,setRole:(0,a.useCallback)(async t=>{if(!e)return;let r=(0,u.$C)(),s=(0,u.V1)(r,"setUserRole");await s({uid:e.uid,role:t}),await e.getIdToken(!0)},[e]),loading:s}}(),d=(0,c.useRouter)();return((0,a.useEffect)(()=>{l||"admin"===r||d.replace("/")},[l,r,d]),l)?(0,s.jsx)("p",{className:"p-4 text-center text-gray-600",children:"Verificando permiss\xf5es..."}):"admin"!==r?(0,s.jsx)("p",{className:"p-4 text-center text-gray-600",children:"Acesso restrito aos administradores..."}):(0,s.jsx)(s.Fragment,{children:t})}},84832:function(e,t,r){"use strict";r.d(t,{a:function(){return l}});var s=r(2265),a=r(46410),i=r(43301),o=r(64131),n=r(738),u=r(82650);function c(e,t){let r=function(){try{let e=(0,n.C6)().length>0?(0,n.C6)()[0]:(0,n.ZF)({apiKey:"AIzaSyAxDEIXRouCF63f9GK-ShqzTaKQhQIjvyw",authDomain:"controle-horarios-medicos.firebaseapp.com",projectId:"controle-horarios-medicos",storageBucket:"controle-horarios-medicos.firebasestorage.app",messagingSenderId:"977729325505",appId:"1:977729325505:web:82fe901b78d874ef81c740",measurementId:"YOUR_MEASUREMENT_ID"});return u.getAnalytics(e)}catch(e){return console.warn("Analytics init falhou",e),null}}();r&&u.logEvent(r,e,t)}function l(){let[e,t]=(0,s.useState)(null),[r,n]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=(0,i.Aj)(a.I,async e=>{if(t(e),e){let t=await e.getIdToken();o.Z.set("auth-token",t,{expires:1}),localStorage.setItem("user",JSON.stringify({uid:e.uid,email:e.email}))}else o.Z.remove("auth-token"),localStorage.removeItem("user");n(!1)}),r=(0,i.MX)(a.I,async e=>{if(e){let t=await e.getIdToken();o.Z.set("auth-token",t,{expires:1})}});return()=>{e(),r()}},[]);let u=(0,s.useCallback)(async(e,t)=>{await (0,i.e5)(a.I,e,t),c("login_success")},[]);return{user:e,loading:r,login:u,register:(0,s.useCallback)(async(e,t)=>{await (0,i.Xb)(a.I,e,t),c("register_success")},[]),logout:(0,s.useCallback)(async()=>{await (0,i.w7)(a.I),c("logout")},[]),resetPassword:(0,s.useCallback)(async e=>{await (0,i.LS)(a.I,e)},[])}}},24738:function(e,t,r){"use strict";function s(e){let[t,r]=e.split(":").map(Number);return 60*t+r}function a(e,t){let r=s(e),a=s(t);return a<r&&(a+=1440),(a-r)/60}r.d(t,{PA:function(){return a}})},46410:function(e,t,r){"use strict";let s;r.d(t,{I:function(){return u},db:function(){return c}});var a,i=r(738),o=r(43301),n=r(5978);s=null!==(a=window._firebaseApp)&&void 0!==a?a:(0,i.ZF)({apiKey:"AIzaSyAxDEIXRouCF63f9GK-ShqzTaKQhQIjvyw",authDomain:"controle-horarios-medicos.firebaseapp.com",projectId:"controle-horarios-medicos",storageBucket:"controle-horarios-medicos.firebasestorage.app",messagingSenderId:"977729325505",appId:"1:977729325505:web:82fe901b78d874ef81c740",measurementId:"YOUR_MEASUREMENT_ID"}),window._firebaseApp=s;let u=(0,o.v0)(s),c=(0,n.ad)(s)},47656:function(e,t,r){"use strict";r.d(t,{R:function(){return i}});var s=r(3011),a=r(89134);let i=(0,s.U)()((0,a.tJ)(e=>({equipes:[],addEquipe:t=>e(e=>({equipes:[...e.equipes,t]})),updateEquipe:(t,r)=>e(e=>({equipes:e.equipes.map(e=>e.id===t?{...e,...r}:e)})),deleteEquipe:t=>e(e=>({equipes:e.equipes.filter(e=>e.id!==t)}))}),{name:"equipe-store"}))},77280:function(e,t,r){"use strict";r.d(t,{F:function(){return n}});var s=r(3011),a=r(89134),i=r(46410),o=r(5978);let n=(0,s.U)()((0,a.tJ)(e=>({registros:[],addRegistro:async t=>{e(e=>({registros:[...e.registros,t]}));try{await (0,o.pl)((0,o.JU)(i.db,"registros",t.id),t)}catch(e){console.error("Erro ao salvar no Firestore",e)}},updateRegistro:async(t,r)=>{e(e=>({registros:e.registros.map(e=>e.id===t?{...e,...r}:e)}));try{await (0,o.r7)((0,o.JU)(i.db,"registros",t),r)}catch(e){console.error("Erro ao atualizar no Firestore",e)}},deleteRegistro:async t=>{e(e=>({registros:e.registros.filter(e=>e.id!==t)}));try{await (0,o.oe)((0,o.JU)(i.db,"registros",t))}catch(e){console.error("Erro ao deletar no Firestore",e)}},setRegistros:t=>e({registros:t})}),{name:"registro-store"}))}},function(e){e.O(0,[358,237,996,553,990,162,491,971,117,744],function(){return e(e.s=32576)}),_N_E=e.O()}]);