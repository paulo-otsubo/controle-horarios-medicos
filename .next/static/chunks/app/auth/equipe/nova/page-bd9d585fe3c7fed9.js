(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[486],{99154:function(e,t,r){Promise.resolve().then(r.bind(r,36872))},36872:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var s=r(57437);r(2265);var a=r(99376),n=r(47656),i=r(65044),o=r(66629),c=r(96840);function u(){let e=(0,n.R)(e=>e.addEquipe),t=(0,a.useRouter)();return(0,s.jsx)(c.Z,{children:(0,s.jsxs)("div",{className:"max-w-xl mx-auto bg-white p-6 rounded-lg shadow-sm",children:[(0,s.jsx)("h2",{className:"mb-4 text-xl font-semibold",children:"Nova Equipe"}),(0,s.jsx)(i.Z,{onSubmit:function(r){e({id:(0,o.x0)(),nome:r.nome,descricao:r.descricao,membros:[],createdAt:new Date().toISOString()}),t.push("/auth/equipe")},onCancel:()=>t.back()})]})})}},96840:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var s=r(57437),a=r(2265),n=r(84832),i=r(46410),o=r(43301),c=r(13491),u=r(99376);function l(e){let{children:t}=e,{role:r,loading:l}=function(){let{user:e}=(0,n.a)(),[t,r]=(0,a.useState)("member"),[s,u]=(0,a.useState)(!0);async function l(e){if(!e){r("member"),u(!1);return}r("admin"===(await e.getIdTokenResult(!0)).claims.role?"admin":"member"),u(!1)}return(0,a.useEffect)(()=>{l(e)},[e]),(0,a.useEffect)(()=>{let e=(0,o.MX)(i.I,e=>{l(e)});return()=>e()},[]),{role:t,setRole:(0,a.useCallback)(async t=>{if(!e)return;let r=(0,c.$C)(),s=(0,c.V1)(r,"setUserRole");await s({uid:e.uid,role:t}),await e.getIdToken(!0)},[e]),loading:s}}(),d=(0,u.useRouter)();return((0,a.useEffect)(()=>{l||"admin"===r||d.replace("/")},[l,r,d]),l)?(0,s.jsx)("p",{className:"p-4 text-center text-gray-600",children:"Verificando permiss\xf5es..."}):"admin"!==r?(0,s.jsx)("p",{className:"p-4 text-center text-gray-600",children:"Acesso restrito aos administradores..."}):(0,s.jsx)(s.Fragment,{children:t})}},65044:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var s=r(57437),a=r(2265),n=r(29501),i=r(91115),o=r(80845);let c=i.z.object({nome:i.z.string().min(2,"Informe um nome"),descricao:i.z.string().optional()});function u(e){let{initial:t,onSubmit:r,onCancel:i}=e,{register:u,handleSubmit:l,formState:{errors:d},reset:m}=(0,n.cI)({resolver:(0,o.F)(c),defaultValues:t});return(0,a.useEffect)(()=>{m(null!=t?t:{nome:"",descricao:""})},[t,m]),(0,s.jsxs)("form",{onSubmit:l(r),className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nome"}),(0,s.jsx)("input",{type:"text",...u("nome"),className:"mt-1 w-full rounded border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),d.nome&&(0,s.jsx)("p",{className:"text-sm text-error-500",children:d.nome.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Descri\xe7\xe3o"}),(0,s.jsx)("textarea",{rows:3,...u("descricao"),className:"mt-1 w-full rounded border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),d.descricao&&(0,s.jsx)("p",{className:"text-sm text-error-500",children:d.descricao.message})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[i&&(0,s.jsx)("button",{type:"button",onClick:i,className:"rounded bg-gray-200 px-4 py-2 text-gray-700 hover:bg-gray-300",children:"Cancelar"}),(0,s.jsx)("button",{type:"submit",className:"rounded bg-primary-500 px-4 py-2 text-white hover:bg-primary-600",children:"Salvar"})]})]})}},84832:function(e,t,r){"use strict";r.d(t,{a:function(){return l}});var s=r(2265),a=r(46410),n=r(43301),i=r(64131),o=r(738),c=r(82650);function u(e,t){let r=function(){try{let e=(0,o.C6)().length>0?(0,o.C6)()[0]:(0,o.ZF)({apiKey:"AIzaSyAxDEIXRouCF63f9GK-ShqzTaKQhQIjvyw",authDomain:"controle-horarios-medicos.firebaseapp.com",projectId:"controle-horarios-medicos",storageBucket:"controle-horarios-medicos.firebasestorage.app",messagingSenderId:"977729325505",appId:"1:977729325505:web:82fe901b78d874ef81c740",measurementId:"YOUR_MEASUREMENT_ID"});return c.getAnalytics(e)}catch(e){return console.warn("Analytics init falhou",e),null}}();r&&c.logEvent(r,e,t)}function l(){let[e,t]=(0,s.useState)(null),[r,o]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=(0,n.Aj)(a.I,async e=>{if(t(e),e){let t=await e.getIdToken();i.Z.set("auth-token",t,{expires:1}),localStorage.setItem("user",JSON.stringify({uid:e.uid,email:e.email}))}else i.Z.remove("auth-token"),localStorage.removeItem("user");o(!1)}),r=(0,n.MX)(a.I,async e=>{if(e){let t=await e.getIdToken();i.Z.set("auth-token",t,{expires:1})}});return()=>{e(),r()}},[]);let c=(0,s.useCallback)(async(e,t)=>{await (0,n.e5)(a.I,e,t),u("login_success")},[]);return{user:e,loading:r,login:c,register:(0,s.useCallback)(async(e,t)=>{await (0,n.Xb)(a.I,e,t),u("register_success")},[]),logout:(0,s.useCallback)(async()=>{await (0,n.w7)(a.I),u("logout")},[]),resetPassword:(0,s.useCallback)(async e=>{await (0,n.LS)(a.I,e)},[])}}},46410:function(e,t,r){"use strict";let s;r.d(t,{I:function(){return c},db:function(){return u}});var a,n=r(738),i=r(43301),o=r(5978);s=null!==(a=window._firebaseApp)&&void 0!==a?a:(0,n.ZF)({apiKey:"AIzaSyAxDEIXRouCF63f9GK-ShqzTaKQhQIjvyw",authDomain:"controle-horarios-medicos.firebaseapp.com",projectId:"controle-horarios-medicos",storageBucket:"controle-horarios-medicos.firebasestorage.app",messagingSenderId:"977729325505",appId:"1:977729325505:web:82fe901b78d874ef81c740",measurementId:"YOUR_MEASUREMENT_ID"}),window._firebaseApp=s;let c=(0,i.v0)(s),u=(0,o.ad)(s)},47656:function(e,t,r){"use strict";r.d(t,{R:function(){return n}});var s=r(3011),a=r(89134);let n=(0,s.U)()((0,a.tJ)(e=>({equipes:[],addEquipe:t=>e(e=>({equipes:[...e.equipes,t]})),updateEquipe:(t,r)=>e(e=>({equipes:e.equipes.map(e=>e.id===t?{...e,...r}:e)})),deleteEquipe:t=>e(e=>({equipes:e.equipes.filter(e=>e.id!==t)}))}),{name:"equipe-store"}))},66629:function(e,t,r){"use strict";r.d(t,{x0:function(){return s}});let s=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>((t&=63)<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"")}},function(e){e.O(0,[358,237,996,553,990,162,544,491,971,117,744],function(){return e(e.s=99154)}),_N_E=e.O()}]);